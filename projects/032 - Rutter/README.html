<style>@page {
  margin: 1.5cm;
  size: A4 portrait;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif,
    Apple Color Emoji, Segoe UI Emoji;
  font-size: 16px;
  line-height: 1.5;
  word-wrap: break-word;
  margin-bottom: 0;
}

body > :last-child {
  margin-bottom: -1px;
  overflow: hidden;
}

h1 {
  font-size: 2em;
}

h2 {
  font-size: 1.5em;
}

h3 {
  font-size: 1.25em;
}

h4 {
  font-size: 1em;
}

h1,
h2,
h3,
h4 {
  margin-top: 24px;
  margin-bottom: 16px;
  font-weight: 600;
  line-height: 1.25;
}

b,
strong {
  font-weight: 600;
}

p {
  text-align: justify;
}

table {
  break-inside: avoid;
  table-layout: auto;
  border-collapse: collapse;
  text-indent: 0;
  border-color: inherit;
  width: 100%;
}

th {
  background: #f3f4f4;
}

th,
td {
  padding: 5px;
  border: 1px solid black;
}

code {
  padding: 0.2em 0.4em;
  margin: 0;
  font-family: ui-monospace, SFMono-Regular, SF Mono, Consolas, Liberation Mono, Menlo, monospace;
  font-size: 85%;
  background-color: #f3f4f4;
  border-radius: 6px;
  white-space: nowrap;
}

pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f6f8fa;
  border-radius: 6px;
}

pre > code {
  word-wrap: normal;
  white-space: pre-wrap;
  background-color: #f6f8fa;
}
</style><p><em>This file is autogenerated. Please do not edit.</em></p>
<h1><em>TODO</em> - project title</h1>
<h2>Summary</h2>
<p><strong>TODO</strong> edit <code>about.md</code> to insert a brief lay summary of the work.</p>
<h2>Table of contents</h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#methodology">Methodology</a></li>
<li><a href="#reusable-queries">Reusable queries</a></li>
<li><a href="#clinical-code-sets">Clinical code sets</a></li>
</ul>
<h2>Introduction</h2>
<p>The aim of this document is to provide full transparency for all parts of the data extraction process.
This includes:</p>
<ul>
<li>The methodology around how the data extraction process is managed and quality is maintained.</li>
<li>A full list of all queries used in the extraction, and their associated objectives and assumptions.</li>
<li>A full list of all clinical codes used for the extraction.</li>
</ul>
<h2>Methodology</h2>
<p>After each proposal is approved, a Research Data Engineer (RDE) works closely with the research team to establish precisely what data they require and in what format.
The RDE has access to the entire de-identified database and so builds up an expertise as to which projects are feasible and how best to extract the relevant data.
The RDE has access to a library of resusable SQL queries for common tasks, and sets of clinical codes for different phenotypes, built up from previous studies.
Prior to data extraction, the code is checked and signed off by another RDE.</p>
<h2>Reusable queries</h2>
<p>This project required the following reusable queries:</p>
<ul>
<li>Smoking status</li>
<li>BMI</li>
<li>Long-term conditions</li>
<li>Index Multiple Deprivation</li>
<li>Classify secondary admissions</li>
<li>COVID-related secondary admissions</li>
<li>Patients with COVID</li>
<li>Secondary admissions and length of stay</li>
<li>Secondary discharges</li>
<li>Define Cohort for RQ032: patients that had a diabetes intervention and are included in the MyWay Dataset</li>
<li>Cohort matching on year of birth / sex</li>
<li>Year of birth</li>
<li>Sex</li>
</ul>
<p>Further details for each query can be found below.</p>
<h3>Smoking status</h3>
<p>To get the smoking status for each patient in a cohort.</p>
<p><em>Assumptions</em></p>
<ul>
<li>We take the most recent smoking status in a patient's record to be correct</li>
<li>However, there is likely confusion between the &quot;non smoker&quot; and &quot;never smoked&quot; codes. Especially as sometimes the synonyms for these codes overlap. Therefore, a patient wih a most recent smoking status of &quot;never&quot;, but who has previous smoking codes, would be classed as WorstSmokingStatus=non-trivial-smoker / CurrentSmokingStatus=non-smoker</li>
</ul>
<p><em>Input</em></p>
<pre><code>Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
 Also takes one parameter:
	- gp-events-table: string - (table name) the name of the table containing the GP events. Usually is &quot;RLS.vw_GP_Events&quot; but can be anything with the columns: FK_Patient_Link_ID, EventDate, FK_Reference_Coding_ID, and FK_Reference_SnomedCT_ID
</code></pre>
<p><em>Output</em></p>
<pre><code>A temp table as follows:
 #PatientSmokingStatus (FK_Patient_Link_ID, PassiveSmoker, WorstSmokingStatus, CurrentSmokingStatus)
	- FK_Patient_Link_ID - unique patient id
	- PassiveSmoker - Y/N (whether a patient has ever had a code for passive smoking)
	- WorstSmokingStatus - [non-trivial-smoker/trivial-smoker/non-smoker]
	- CurrentSmokingStatus - [non-trivial-smoker/trivial-smoker/non-smoker]
</code></pre>
<p><em>File</em>: <code>query-patient-smoking-status.sql</code></p>
<p><em>Link</em>: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-smoking-status.sql">https://github.com/rw251/.../query-patient-smoking-status.sql</a></p>
<hr>
<h3>BMI</h3>
<p>To get the BMI for each patient in a cohort.</p>
<p><em>Assumptions</em></p>
<ul>
<li>We take the measurement closest to @IndexDate to be correct</li>
</ul>
<p><em>Input</em></p>
<pre><code>Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
 Also takes one parameter:
	- gp-events-table: string - (table name) the name of the table containing the GP events. Usually is &quot;RLS.vw_GP_Events&quot; but can be anything with the columns: FK_Patient_Link_ID, EventDate, FK_Reference_Coding_ID, and FK_Reference_SnomedCT_ID
 Also assumes there is an @IndexDate defined - The index date of the study
</code></pre>
<p><em>Output</em></p>
<pre><code>A temp table as follows:
 #PatientBMI (FK_Patient_Link_ID, BMI, DateOfBMIMeasurement)
	- FK_Patient_Link_ID - unique patient id
  - BMI
  - DateOfBMIMeasurement
</code></pre>
<p><em>File</em>: <code>query-patient-bmi.sql</code></p>
<p><em>Link</em>: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-bmi.sql">https://github.com/rw251/.../query-patient-bmi.sql</a></p>
<hr>
<h3>Long-term conditions</h3>
<p>To get every long-term condition for each patient.</p>
<p><em>Input</em></p>
<pre><code>Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
 A distinct list of FK_Patient_Link_IDs for each patient in the cohort
</code></pre>
<p><em>Output</em></p>
<pre><code>A temp table with a row for each patient and ltc combo
 #PatientsWithLTCs (FK_Patient_Link_ID, LTC)
</code></pre>
<p><em>File</em>: <code>query-patient-ltcs.sql</code></p>
<p><em>Link</em>: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-ltcs.sql">https://github.com/rw251/.../query-patient-ltcs.sql</a></p>
<hr>
<h3>Index Multiple Deprivation</h3>
<p>To get the 2019 Index of Multiple Deprivation (IMD) decile for each patient.</p>
<p><em>Input</em></p>
<pre><code>Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
</code></pre>
<p><em>Output</em></p>
<pre><code>A temp table as follows:
 #PatientIMDDecile (FK_Patient_Link_ID, IMD2019Decile1IsMostDeprived10IsLeastDeprived)
 	- FK_Patient_Link_ID - unique patient id
	- IMD2019Decile1IsMostDeprived10IsLeastDeprived - number 1 to 10 inclusive
</code></pre>
<p><em>File</em>: <code>query-patient-imd.sql</code></p>
<p><em>Link</em>: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-imd.sql">https://github.com/rw251/.../query-patient-imd.sql</a></p>
<hr>
<h3>Classify secondary admissions</h3>
<p>To categorise admissions to secondary care into 5 categories: Maternity, Unplanned, Planned, Transfer and Unknown.</p>
<p><em>Assumptions</em></p>
<ul>
<li>We assume patients can only have one admission per day. This is probably not true, but where we see multiple admissions it is more likely to be data duplication, or internal admissions, than an admission, discharge and another admission in the same day.</li>
<li>Where patients have multiple admissions we choose the &quot;highest&quot; category for admission with the categories ranked as follows: Maternity &gt; Unplanned &gt; Planned &gt; Transfer &gt; Unknown</li>
<li>We have used the following classifications based on the AdmissionTypeCode:
<ul>
<li>PLANNED: PL (ELECTIVE PLANNED), 11 (Elective - Waiting List), WL (ELECTIVE WL), 13 (Elective - Planned), 12 (Elective - Booked), BL (ELECTIVE BOOKED), D (NULL), Endoscopy (Endoscopy), OP (DIRECT OUTPAT CLINIC), Venesection (X36.2 Venesection), Colonoscopy (H22.9 Colonoscopy), Medical (Medical)</li>
<li>UNPLANNED: AE (AE.DEPT.OF PROVIDER), 21 (Emergency - Local A&amp;E), I (NULL), GP (GP OR LOCUM GP), 22 (Emergency - GP), 23 (Emergency - Bed Bureau), 28 (Emergency - Other (inc other provider A&amp;E)), 2D (Emergency - Other), 24 (Emergency - Clinic), EM (EMERGENCY OTHER), AI (ACUTE TO INTMED CARE), BB (EMERGENCY BED BUREAU), DO (EMERGENCY DOMICILE), 2A (A+E Department of another provider where the Patient has not been admitted), A+E (Admission	 A+E Admission), Emerg (GP	Emergency GP Patient)</li>
<li>MATERNITY: 31 (Maternity ante-partum), BH (BABY BORN IN HOSP), AN (MATERNITY ANTENATAL), 82 (Birth in this Health Care Provider), PN (MATERNITY POST NATAL), B (NULL), 32 (Maternity post-partum), BHOSP (Birth in this Health Care Provider)</li>
<li>TRANSFER: 81 (Transfer from other hosp (not A&amp;E)), TR (PLAN TRANS TO TRUST), ET (EM TRAN (OTHER PROV)), HospTran (Transfer from other NHS Hospital), T (TRANSFER), CentTrans (Transfer from CEN Site)</li>
<li>OTHER: Anything else not previously classified</li>
</ul>
</li>
</ul>
<p><em>Input</em></p>
<pre><code>No pre-requisites
</code></pre>
<p><em>Output</em></p>
<pre><code>A temp table as follows:
 #AdmissionTypes (FK_Patient_Link_ID, AdmissionDate, AcuteProvider, AdmissionType)
 	- FK_Patient_Link_ID - unique patient id
	- AdmissionDate - date of admission (YYYY-MM-DD)
	- AcuteProvider - Bolton, SRFT, Stockport etc..
	- AdmissionType - One of: Maternity/Unplanned/Planned/Transfer/Unknown
</code></pre>
<p><em>File</em>: <code>query-classify-secondary-admissions.sql</code></p>
<p><em>Link</em>: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-classify-secondary-admissions.sql">https://github.com/rw251/.../query-classify-secondary-admissions.sql</a></p>
<hr>
<h3>COVID-related secondary admissions</h3>
<p>To classify every admission to secondary care based on whether it is a COVID or non-COVID related. A COVID-related admission is classed as an admission within 4 weeks after, or up to 2 weeks before a positive test.</p>
<p><em>Input</em></p>
<pre><code>Takes one parameter
  - start-date: string - (YYYY-MM-DD) the date to count diagnoses from. Usually this should be 2020-01-01.
	-	all-patients: boolean - (true/false) if true, then all patients are included, otherwise only those in the pre-existing #Patients table.
	- gp-events-table: string - (table name) the name of the table containing the GP events. Usually is &quot;RLS.vw_GP_Events&quot; but can be anything with the columns: FK_Patient_Link_ID, EventDate, and SuppliedCode
 And assumes there exists two temp tables as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
 #Admissions (FK_Patient_Link_ID, AdmissionDate, AcuteProvider)
  A distinct list of the admissions for each patient in the cohort
</code></pre>
<p><em>Output</em></p>
<pre><code>A temp table as follows:
 #COVIDUtilisationAdmissions (FK_Patient_Link_ID, AdmissionDate, AcuteProvider, CovidHealthcareUtilisation)
	- FK_Patient_Link_ID - unique patient id
	- AdmissionDate - date of admission (YYYY-MM-DD)
	- AcuteProvider - Bolton, SRFT, Stockport etc..
	- CovidHealthcareUtilisation - 'TRUE' if admission within 4 weeks after, or up to 14 days before, a positive test
</code></pre>
<p><em>File</em>: <code>query-admissions-covid-utilisation.sql</code></p>
<p><em>Link</em>: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-admissions-covid-utilisation.sql">https://github.com/rw251/.../query-admissions-covid-utilisation.sql</a></p>
<hr>
<h3>Patients with COVID</h3>
<p>To get tables of all patients with a COVID diagnosis in their record. This now includes a table that has reinfections. This uses a 90 day cut-off to rule out patients that get multiple tests for a single infection. This 90 day cut-off is also used in the government COVID dashboard. In the first wave, prior to widespread COVID testing, and prior to the correct clinical codes being	available to clinicians, infections were recorded in a variety of ways. We therefore take the first diagnosis from any code indicative of COVID. However, for subsequent infections we insist on the presence of a positive COVID test (PCR or antigen) as opposed to simply a diagnosis code. This is to avoid the situation where a hospital diagnosis code gets entered into the primary care record several months after the actual infection.</p>
<p><em>Input</em></p>
<pre><code>Takes three parameters
  - start-date: string - (YYYY-MM-DD) the date to count diagnoses from. Usually this should be 2020-01-01.
	-	all-patients: boolean - (true/false) if true, then all patients are included, otherwise only those in the pre-existing #Patients table.
	- gp-events-table: string - (table name) the name of the table containing the GP events. Usually is &quot;SharedCare.GP_Events&quot; but can be anything with the columns: FK_Patient_Link_ID, EventDate, and SuppliedCode
</code></pre>
<p><em>Output</em></p>
<pre><code>Three temp tables as follows:
 #CovidPatients (FK_Patient_Link_ID, FirstCovidPositiveDate)
 	- FK_Patient_Link_ID - unique patient id
	- FirstCovidPositiveDate - earliest COVID diagnosis
 #CovidPatientsAllDiagnoses (FK_Patient_Link_ID, CovidPositiveDate)
 	- FK_Patient_Link_ID - unique patient id
	- CovidPositiveDate - any COVID diagnosis
 #CovidPatientsMultipleDiagnoses
	-	FK_Patient_Link_ID - unique patient id
	-	FirstCovidPositiveDate - date of first COVID diagnosis
	-	SecondCovidPositiveDate - date of second COVID diagnosis
	-	ThirdCovidPositiveDate - date of third COVID diagnosis
	-	FourthCovidPositiveDate - date of fourth COVID diagnosis
	-	FifthCovidPositiveDate - date of fifth COVID diagnosis
</code></pre>
<p><em>File</em>: <code>query-patients-with-covid.sql</code></p>
<p><em>Link</em>: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patients-with-covid.sql">https://github.com/rw251/.../query-patients-with-covid.sql</a></p>
<hr>
<h3>Secondary admissions and length of stay</h3>
<p>To obtain a table with every secondary care admission, along with the acute provider, the date of admission, the date of discharge, and the length of stay.</p>
<p><em>Input</em></p>
<pre><code>One parameter
	-	all-patients: boolean - (true/false) if true, then all patients are included, otherwise only those in the pre-existing #Patients table.
</code></pre>
<p><em>Output</em></p>
<pre><code>Two temp table as follows:
 #Admissions (FK_Patient_Link_ID, AdmissionDate, AcuteProvider)
 	- FK_Patient_Link_ID - unique patient id
	- AdmissionDate - date of admission (YYYY-MM-DD)
	- AcuteProvider - Bolton, SRFT, Stockport etc..
  (Limited to one admission per person per hospital per day, because if a patient has 2 admissions
   on the same day to the same hopsital then it's most likely data duplication rather than two short
   hospital stays)
 #LengthOfStay (FK_Patient_Link_ID, AdmissionDate)
 	- FK_Patient_Link_ID - unique patient id
	- AdmissionDate - date of admission (YYYY-MM-DD)
	- AcuteProvider - Bolton, SRFT, Stockport etc..
	- DischargeDate - date of discharge (YYYY-MM-DD)
	- LengthOfStay - Number of days between admission and discharge. 1 = [0,1) days, 2 = [1,2) days, etc.
</code></pre>
<p><em>File</em>: <code>query-get-admissions-and-length-of-stay.sql</code></p>
<p><em>Link</em>: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-get-admissions-and-length-of-stay.sql">https://github.com/rw251/.../query-get-admissions-and-length-of-stay.sql</a></p>
<hr>
<h3>Secondary discharges</h3>
<p>To obtain a table with every secondary care discharge, along with the acute provider, and the date of discharge.</p>
<p><em>Input</em></p>
<pre><code>One parameter
	-	all-patients: boolean - (true/false) if true, then all patients are included, otherwise only those in the pre-existing #Patients table.
</code></pre>
<p><em>Output</em></p>
<pre><code>A temp table as follows:
 #Discharges (FK_Patient_Link_ID, DischargeDate, AcuteProvider)
 	- FK_Patient_Link_ID - unique patient id
	- DischargeDate - date of discharge (YYYY-MM-DD)
	- AcuteProvider - Bolton, SRFT, Stockport etc..
  (Limited to one discharge per person per hospital per day, because if a patient has 2 discharges
   on the same day to the same hopsital then it's most likely data duplication rather than two short
   hospital stays)
</code></pre>
<p><em>File</em>: <code>query-get-discharges.sql</code></p>
<p><em>Link</em>: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-get-discharges.sql">https://github.com/rw251/.../query-get-discharges.sql</a></p>
<hr>
<h3>Define Cohort for RQ032: patients that had a diabetes intervention and are included in the MyWay Dataset</h3>
<p>To build the cohort of patients needed for RQ032. This reduces duplication of code in the template scripts.</p>
<p><em>Input</em></p>
<pre><code>assumes there exists one temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
</code></pre>
<p><em>Output</em></p>
<pre><code>Temp tables as follows:
 #MainCohort
 #MatchedCohort
 #PatientEventData
</code></pre>
<p><em>File</em>: <code>query-build-rq032-cohort.sql</code></p>
<p><em>Link</em>: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-build-rq032-cohort.sql">https://github.com/rw251/.../query-build-rq032-cohort.sql</a></p>
<hr>
<h3>Cohort matching on year of birth / sex</h3>
<p>To take a primary cohort and find a 1:n matched cohort based on year of birth and sex.</p>
<p><em>Input</em></p>
<pre><code>Takes two parameters
  - yob-flex: integer - number of years each way that still allow a year of birth match
  - num-matches: integer - number of matches for each patient in the cohort
 Requires two temp tables to exist as follows:
 #MainCohort (FK_Patient_Link_ID, Sex, YearOfBirth)
 	- FK_Patient_Link_ID - unique patient id
	- Sex - M/F
	- YearOfBirth - Integer
 #PotentialMatches (FK_Patient_Link_ID, Sex, YearOfBirth)
 	- FK_Patient_Link_ID - unique patient id
	- Sex - M/F
	- YearOfBirth - Integer
</code></pre>
<p><em>Output</em></p>
<pre><code>A temp table as follows:
 #CohortStore (FK_Patient_Link_ID, YearOfBirth, Sex, MatchingPatientId, MatchingYearOfBirth)
  - FK_Patient_Link_ID - unique patient id for primary cohort patient
  - YearOfBirth - of the primary cohort patient
  - Sex - of the primary cohort patient
  - MatchingPatientId - id of the matched patient
  - MatchingYearOfBirth - year of birth of the matched patient
</code></pre>
<p><em>File</em>: <code>query-cohort-matching-yob-sex-alt.sql</code></p>
<p><em>Link</em>: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-cohort-matching-yob-sex-alt.sql">https://github.com/rw251/.../query-cohort-matching-yob-sex-alt.sql</a></p>
<hr>
<h3>Year of birth</h3>
<p>To get the year of birth for each patient.</p>
<p><em>Assumptions</em></p>
<ul>
<li>Patient data is obtained from multiple sources. Where patients have multiple YOBs we determine the YOB as follows:</li>
<li>If the patients has a YOB in their primary care data feed we use that as most likely to be up to date</li>
<li>If every YOB for a patient is the same, then we use that</li>
<li>If there is a single most recently updated YOB in the database then we use that</li>
<li>Otherwise we take the highest YOB for the patient that is not in the future</li>
</ul>
<p><em>Input</em></p>
<pre><code>Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
</code></pre>
<p><em>Output</em></p>
<pre><code>A temp table as follows:
 #PatientYearOfBirth (FK_Patient_Link_ID, YearOfBirth)
 	- FK_Patient_Link_ID - unique patient id
	- YearOfBirth - INT
</code></pre>
<p><em>File</em>: <code>query-patient-year-of-birth.sql</code></p>
<p><em>Link</em>: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-year-of-birth.sql">https://github.com/rw251/.../query-patient-year-of-birth.sql</a></p>
<hr>
<h3>Sex</h3>
<p>To get the Sex for each patient.</p>
<p><em>Assumptions</em></p>
<ul>
<li>Patient data is obtained from multiple sources. Where patients have multiple sexes we determine the sex as follows:</li>
<li>If the patients has a sex in their primary care data feed we use that as most likely to be up to date</li>
<li>If every sex for a patient is the same, then we use that</li>
<li>If there is a single most recently updated sex in the database then we use that</li>
<li>Otherwise the patient's sex is considered unknown</li>
</ul>
<p><em>Input</em></p>
<pre><code>Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
</code></pre>
<p><em>Output</em></p>
<pre><code>A temp table as follows:
 #PatientSex (FK_Patient_Link_ID, Sex)
 	- FK_Patient_Link_ID - unique patient id
	- Sex - M/F
</code></pre>
<p><em>File</em>: <code>query-patient-sex.sql</code></p>
<p><em>Link</em>: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-sex.sql">https://github.com/rw251/.../query-patient-sex.sql</a></p>
<h2>Clinical code sets</h2>
<p>This project required the following clinical code sets:</p>
<ul>
<li>diabetes-type-ii v1</li>
<li>polycystic-ovarian-syndrome v1</li>
<li>gestational-diabetes v1</li>
<li>covid-positive-antigen-test v1</li>
<li>covid-positive-pcr-test v1</li>
<li>covid-positive-test-other v1</li>
<li>bnf-cardiovascular-meds v1</li>
<li>bnf-cns-meds v1</li>
<li>bnf-endocrine-meds v1</li>
<li>hba1c v2</li>
<li>cholesterol v2</li>
<li>hdl-cholesterol v1</li>
<li>ldl-cholesterol v1</li>
<li>egfr v1</li>
<li>creatinine v1</li>
<li>triglycerides v1</li>
<li>systolic-blood-pressure v1</li>
<li>diastolic-blood-pressure v1</li>
<li>urinary-albumin-creatinine-ratio v1</li>
<li>height v1</li>
<li>weight v1</li>
<li>bmi v2</li>
<li>smoking-status-current v1</li>
<li>smoking-status-currently-not v1</li>
<li>smoking-status-ex v1</li>
<li>smoking-status-ex-trivial v1</li>
<li>smoking-status-never v1</li>
<li>smoking-status-passive v1</li>
<li>smoking-status-trivial v1</li>
</ul>
<p>Further details for each code set can be found below.</p>
<h3>Diabetes mellitus type 2</h3>
<p>Any diagnosis of T2DM. A super set of the QOF business rule. Includes &quot;adult onset&quot; diabetes, but DOES NOT include &quot;maturity onset&quot; diabetes.</p>
<p>Developed from https://getset.ga.</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>5.06% - 5.20%</code> suggests that this code set is well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-05-07</td>
<td>EMIS</td>
<td>2605681</td>
<td style="text-align:right">133938 (5.14%)</td>
<td style="text-align:right">133938 (5.14%)</td>
</tr>
<tr>
<td>2021-05-07</td>
<td>TPP</td>
<td>210817</td>
<td style="text-align:right">10954 (5.20%)</td>
<td style="text-align:right">10954 (5.20%)</td>
</tr>
<tr>
<td>2021-05-07</td>
<td>Vision</td>
<td>334632</td>
<td style="text-align:right">16936 (5.06%)</td>
<td style="text-align:right">16933 (5.06%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/diabetes-type-ii/1">https://github.com/rw251/.../conditions/diabetes-type-ii/1</a></p>
<h3>Polycystic Ovarian Syndrome</h3>
<p>Any diagnosis of polycystic ovarian syndrome.</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>1.1% - 1.4%</code> suggests that this code set is well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-10-13</td>
<td>EMIS</td>
<td>2629848</td>
<td style="text-align:right">37029 (1.41%)</td>
<td style="text-align:right">37029 (1.41%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>TPP</td>
<td>211812</td>
<td style="text-align:right">2348 (1.11%)</td>
<td style="text-align:right">2348 (1.11%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>Vision</td>
<td>338205</td>
<td style="text-align:right">3829 (1.13%)</td>
<td style="text-align:right">3829 (1.13%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/polycystic-ovarian-syndrome/1">https://github.com/rw251/.../conditions/polycystic-ovarian-syndrome/1</a></p>
<h3>Gestational Diabetes</h3>
<p>Any diagnosis of gestational diabetes.</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>0.4% - 0.5%</code> suggests that this code set is well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-10-13</td>
<td>EMIS</td>
<td>2629848</td>
<td style="text-align:right">13962 (0.53%)</td>
<td style="text-align:right">13940 (0.53%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>TPP</td>
<td>211812</td>
<td style="text-align:right">1158 (0.55%)</td>
<td style="text-align:right">1156 (0.55%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>Vision</td>
<td>338205</td>
<td style="text-align:right">1402 (0.41%)</td>
<td style="text-align:right">290 (0.09%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/gestational-diabetes/1">https://github.com/rw251/.../conditions/gestational-diabetes/1</a></p>
<h3>COVID-19 positive antigen test</h3>
<p>A code that indicates that a person has a positive antigen test for COVID-19.</p>
<h4>COVID positive tests in primary care</h4>
<p>The codes used in primary care to indicate a positive COVID test can be split into 3 types: antigen test, PCR test and other. We keep these as separate code sets. However due to the way that COVID diagnoses are recorded in different ways in different GP systems, and because some codes are ambiguous, currently it only makes sense to group these 3 code sets together. Therefore the prevalence log below is for the combined code sets of <code>covid-positive-antigen-test</code>, <code>covid-positive-pcr-test</code> and <code>covid-positive-test-other</code>.</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>18.6% - 20.5%</code> suggests that this code set is likely well defined. <em>NB - this code set needs to rely on the SuppliedCode in the database rather than the foreign key ids.</em></p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2022-02-25</td>
<td>EMIS</td>
<td>2656041</td>
<td style="text-align:right">152972 (5.76%)</td>
<td style="text-align:right">545759 (20.5%)</td>
</tr>
<tr>
<td>2022-02-25</td>
<td>TPP</td>
<td>212453</td>
<td style="text-align:right">256 (0.12%)</td>
<td style="text-align:right">39503 (18.6%)</td>
</tr>
<tr>
<td>2022-02-25</td>
<td>Vision</td>
<td>341354</td>
<td style="text-align:right">9440 (2.77%)</td>
<td style="text-align:right">65963 (19.3%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/covid-positive-antigen-test/1">https://github.com/rw251/.../tests/covid-positive-antigen-test/1</a></p>
<h3>COVID-19 positive pcr test</h3>
<p>A code that indicates that a person has a positive pcr test for COVID-19.</p>
<h4>COVID positive tests in primary care</h4>
<p>The codes used in primary care to indicate a positive COVID test can be split into 3 types: antigen test, PCR test and other. We keep these as separate code sets. However due to the way that COVID diagnoses are recorded in different ways in different GP systems, and because some codes are ambiguous, currently it only makes sense to group these 3 code sets together. Therefore the prevalence log below is for the combined code sets of <code>covid-positive-antigen-test</code>, <code>covid-positive-pcr-test</code> and <code>covid-positive-test-other</code>.</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>18.6% - 20.5%</code> suggests that this code set is likely well defined. <em>NB - this code set needs to rely on the SuppliedCode in the database rather than the foreign key ids.</em></p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2022-02-25</td>
<td>EMIS</td>
<td>2656041</td>
<td style="text-align:right">152972 (5.76%)</td>
<td style="text-align:right">545759 (20.5%)</td>
</tr>
<tr>
<td>2022-02-25</td>
<td>TPP</td>
<td>212453</td>
<td style="text-align:right">256 (0.12%)</td>
<td style="text-align:right">39503 (18.6%)</td>
</tr>
<tr>
<td>2022-02-25</td>
<td>Vision</td>
<td>341354</td>
<td style="text-align:right">9440 (2.77%)</td>
<td style="text-align:right">65963 (19.3%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/covid-positive-pcr-test/1">https://github.com/rw251/.../tests/covid-positive-pcr-test/1</a></p>
<h3>COVID-19 positive test - other</h3>
<p>A code that indicates that a person has a positive test for COVID-19, but where the type of test (antigen or PCR) is unknown.</p>
<h4>COVID positive tests in primary care</h4>
<p>The codes used in primary care to indicate a positive COVID test can be split into 3 types: antigen test, PCR test and other. We keep these as separate code sets. However due to the way that COVID diagnoses are recorded in different ways in different GP systems, and because some codes are ambiguous, currently it only makes sense to group these 3 code sets together. Therefore the prevalence log below is for the combined code sets of <code>covid-positive-antigen-test</code>, <code>covid-positive-pcr-test</code> and <code>covid-positive-test-other</code>.</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>18.6% - 20.5%</code> suggests that this code set is likely well defined. <em>NB - this code set needs to rely on the SuppliedCode in the database rather than the foreign key ids.</em></p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2022-02-25</td>
<td>EMIS</td>
<td>2656041</td>
<td style="text-align:right">152972 (5.76%)</td>
<td style="text-align:right">545759 (20.5%)</td>
</tr>
<tr>
<td>2022-02-25</td>
<td>TPP</td>
<td>212453</td>
<td style="text-align:right">256 (0.12%)</td>
<td style="text-align:right">39503 (18.6%)</td>
</tr>
<tr>
<td>2022-02-25</td>
<td>Vision</td>
<td>341354</td>
<td style="text-align:right">9440 (2.77%)</td>
<td style="text-align:right">65963 (19.3%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/covid-positive-test-other/1">https://github.com/rw251/.../tests/covid-positive-test-other/1</a></p>
<h3>Cardiovascular medications</h3>
<p>This code set was based on a list of SNOMED codes, derived from BNF codes, provided by the study team for RQ32.</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>30.2% - 31.4%</code> suggests that this code set is well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-11-08</td>
<td>EMIS</td>
<td>2641576</td>
<td style="text-align:right">811072 (30.70%)</td>
<td style="text-align:right">810948 (30.70%)</td>
</tr>
<tr>
<td>2021-11-08</td>
<td>TPP</td>
<td>211880</td>
<td style="text-align:right">66547 (31.41%)</td>
<td style="text-align:right">66557 (31.41%)</td>
</tr>
<tr>
<td>2021-11-08</td>
<td>Vision</td>
<td>339069</td>
<td style="text-align:right">102504 (30.23%)</td>
<td style="text-align:right">102504 (30.23%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/bnf-cardiovascular-meds/1">https://github.com/rw251/.../medications/bnf-cardiovascular-meds/1</a></p>
<h3>Central Nervous System medications</h3>
<p>This code set was based on a list of SNOMED codes, derived from BNF codes, provided by the study team for RQ32.</p>
<h4>Prevalence log</h4>
<p>NEED TO UPDATE BELOW</p>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>56% - 64%</code> suggests that this code set is reasonably well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-11-08</td>
<td>EMIS</td>
<td>2641576</td>
<td style="text-align:right">1714809 (64.92%)</td>
<td style="text-align:right">1714733 (64.91%)</td>
</tr>
<tr>
<td>2021-11-08</td>
<td>TPP</td>
<td>211880</td>
<td style="text-align:right">129171 (60.96%)</td>
<td style="text-align:right">129196 (60.98%)</td>
</tr>
<tr>
<td>2021-11-08</td>
<td>Vision</td>
<td>339069</td>
<td style="text-align:right">18966 (56.03%)</td>
<td style="text-align:right">18965 (56.03%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/bnf-cns-meds/1">https://github.com/rw251/.../medications/bnf-cns-meds/1</a></p>
<h3>Endocrine medications</h3>
<p>This code set was based on a list of SNOMED codes, derived from BNF codes, provided by the study team for RQ32.</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>26.3% - 27.3%</code> suggests that this code set is well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-11-09</td>
<td>EMIS</td>
<td>2642853</td>
<td style="text-align:right">696800 (26.37%)</td>
<td style="text-align:right">695807 (26.33%)</td>
</tr>
<tr>
<td>2021-11-09</td>
<td>TPP</td>
<td>211895</td>
<td style="text-align:right">57804 (27.28%)</td>
<td style="text-align:right">57801 (27.28%)</td>
</tr>
<tr>
<td>2021-11-09</td>
<td>Vision</td>
<td>339130</td>
<td style="text-align:right">91061 (26.85%)</td>
<td style="text-align:right">91037 (26.84%)</td>
</tr>
<tr>
<td>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/bnf-endocrine-meds/1">https://github.com/rw251/.../medications/bnf-endocrine-meds/1</a></td>
<td></td>
<td></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>
<h3>HbA1c</h3>
<p>A patient's HbA1c as recorded via clinical code and value. This code set only includes codes that are accompanied by a value (<code>1003671000000109 - Haemoglobin A1c level</code>). It does not include codes that indicate a patient's HbA1c (<code>165679005 - Haemoglobin A1c (HbA1c) less than 7%</code>) without giving the actual value.</p>
<p><strong>NB: This code set is intended to indicate a patient's HbA1c. If you need to know whether a HbA1c was recorded then please use v1 of the code set.</strong></p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>44.93% - 50.88%</code> suggests that this code set is likely well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-05-07</td>
<td>EMIS</td>
<td>2605681</td>
<td style="text-align:right">1170688 (44.93%)</td>
<td style="text-align:right">1170688 (44.93%)</td>
</tr>
<tr>
<td>2021-05-07</td>
<td>TPP</td>
<td>210817</td>
<td style="text-align:right">98972 (46.95%)</td>
<td style="text-align:right">98972 (46.95%)</td>
</tr>
<tr>
<td>2021-05-07</td>
<td>Vision</td>
<td>334632</td>
<td style="text-align:right">170245 (50.88%)</td>
<td style="text-align:right">170245 (50.88%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/hba1c/2">https://github.com/rw251/.../tests/hba1c/2</a></p>
<h3>Cholesterol</h3>
<p>A patient's total cholesterol as recorded via clinical code and value. This code set only includes codes that are accompanied by a value (<code>44P.. Serum cholesterol</code>). It does not include codes that indicate a patient's BMI (<code>44P3. - Serum cholesterol raised</code>) without giving the actual value.</p>
<p><strong>NB: This code set is intended to indicate a patient's total cholesterol. If you need to know whether a cholesterol was recorded then please use v1 of the code set.</strong></p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>43.99% - 49.34%</code> suggests that this code set is likely well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-05-11</td>
<td>EMIS</td>
<td>2606497</td>
<td style="text-align:right">1146925 (44.00%)</td>
<td style="text-align:right">1146651 (43.99%)</td>
</tr>
<tr>
<td>2021-05-11</td>
<td>TPP</td>
<td>210810</td>
<td style="text-align:right">98627 (46.78%)</td>
<td style="text-align:right">98627 (46.78%)</td>
</tr>
<tr>
<td>2021-05-11</td>
<td>Vision</td>
<td>334784</td>
<td style="text-align:right">165186 (49.34%)</td>
<td style="text-align:right">165186 (49.34%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/cholesterol/2">https://github.com/rw251/.../tests/cholesterol/2</a></p>
<h3>HDL Cholesterol</h3>
<p>A patient's HDL cholesterol as recorded via clinical code and value. This code set only includes codes that are accompanied by a value (<code>44P5.00 - Serum HDL cholesterol level</code>).</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>43.66% - 48.97%</code> suggests that this code set is likely well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-10-13</td>
<td>EMIS</td>
<td>26929848</td>
<td style="text-align:right">1168326 (44.42%)</td>
<td style="text-align:right">1168326 (44.42%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>TPP</td>
<td>211812</td>
<td style="text-align:right">100823 (47.60%)</td>
<td style="text-align:right">100823 (47.60%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>Vision</td>
<td>338205</td>
<td style="text-align:right">165935 (49.06%)</td>
<td style="text-align:right">165935 (49.06%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/hdl-cholesterol/1">https://github.com/rw251/.../tests/hdl-cholesterol/1</a></p>
<h3>LDL Cholesterol</h3>
<p>A patient's LDL cholesterol as recorded via clinical code and value. This code set only includes codes that are accompanied by a value (<code>44P6.00 - Serum LDL cholesterol level</code>).</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>41.22% - 45.54%</code> suggests that this code set is likely well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-10-13</td>
<td>EMIS</td>
<td>26929848</td>
<td style="text-align:right">1102872 (41.94%)</td>
<td style="text-align:right">1102872 (41.94%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>TPP</td>
<td>211812</td>
<td style="text-align:right">91673 (43.28%)</td>
<td style="text-align:right">91673 (43.28%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>Vision</td>
<td>338205</td>
<td style="text-align:right">154055 (45.55%)</td>
<td style="text-align:right">154055 (45.55%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/ldl-cholesterol/1">https://github.com/rw251/.../tests/ldl-cholesterol/1</a></p>
<h3>Glomerular filtration rate (GFR)</h3>
<p>Any code that gives the value of a patient's GFR (or estimated GFR - EGFR).</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>52.43% - 57.73%</code> suggests that this code set is likely well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-06-10</td>
<td>EMIS</td>
<td>2610073</td>
<td style="text-align:right">1369349 (52.46%)</td>
<td style="text-align:right">1368468 (52.43%)</td>
</tr>
<tr>
<td>2021-06-10</td>
<td>TPP</td>
<td>211034</td>
<td style="text-align:right">121897 (57.76%)</td>
<td style="text-align:right">121835 (57.73%)</td>
</tr>
<tr>
<td>2021-06-10</td>
<td>Vision</td>
<td>335344</td>
<td style="text-align:right">184635 (55.06%)</td>
<td style="text-align:right">184523 (55.02%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/egfr/1">https://github.com/rw251/.../tests/egfr/1</a></p>
<h3>Creatinine (level)</h3>
<p>A patient's creatinine level as recorded via clinical code and value. This code set only includes codes that are accompanied by a value (<code>44J3.00 - Serum creatinine</code>). It does not include codes that indicate a patient's creatinine (`44J3300 - Serum creatinine raised') without giving the actual value.</p>
<p>Codes taken from: https://www.medrxiv.org/content/medrxiv/suppl/2020/05/19/2020.05.14.20101626.DC1/2020.05.14.20101626-1.pdf</p>
<h4>Prevalence log</h4>
<p>**TABLE BELOW NEEDS UPDATING</p>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>4.91% - 6.24%</code> suggests that this code set is likely well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-10-13</td>
<td>EMIS</td>
<td>26929848</td>
<td style="text-align:right">1518402 (57.74%)</td>
<td style="text-align:right">1518402 (57.74%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>TPP</td>
<td>211812</td>
<td style="text-align:right">125622 (59.31%)</td>
<td style="text-align:right">125622 (59.31%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>Vision</td>
<td>338205</td>
<td style="text-align:right">207191 (61.26%)</td>
<td style="text-align:right">207191 (61.26%)</td>
</tr>
<tr>
<td>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/creatinine/1">https://github.com/rw251/.../tests/creatinine/1</a></td>
<td></td>
<td></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>
<h3>Triglyceride (level)</h3>
<p>A patient's triglyceride level as recorded via clinical code and value. This code set only includes codes that are accompanied by a value (<code>44Q..00 - Serum triglycerides</code>). It does not include codes that indicate a patient's creatinine (`44Q3.00 - Serum triglycerides raised') without giving the actual value.</p>
<p>Codes taken from: https://www.medrxiv.org/content/medrxiv/suppl/2020/05/19/2020.05.14.20101626.DC1/2020.05.14.20101626-1.pdf</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>43.18% - 48.34%</code> suggests that this code set is likely well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-10-13</td>
<td>EMIS</td>
<td>26929848</td>
<td style="text-align:right">1135572 (43.18%)</td>
<td style="text-align:right">1135572 (43.18%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>TPP</td>
<td>211812</td>
<td style="text-align:right">99188 (46.82%)</td>
<td style="text-align:right">99188 (46.82%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>Vision</td>
<td>338205</td>
<td style="text-align:right">163502 (48.34%)</td>
<td style="text-align:right">163502 (48.34%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/triglycerides/1">https://github.com/rw251/.../tests/triglycerides/1</a></p>
<h3>Systolic Blood pressure</h3>
<p>Any indication that systolic blood pressure has been recorded for a patient. This code set only includes codes that are accompanied by a value (<code>2469. - O/E - Systolic BP reading</code>).</p>
<p>Blood pressure codes retrieved from <a href="https://getset.ga">GetSet</a> and metadata available in this directory.</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>64.46% - 67.00%</code> suggests that this code set is likely well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-10-13</td>
<td>EMIS</td>
<td>26929848</td>
<td style="text-align:right">1741342 (66.21%)</td>
<td style="text-align:right">1741342 (66.21%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>TPP</td>
<td>211812</td>
<td style="text-align:right">137571 (64.95%)</td>
<td style="text-align:right">137571 (64.95%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>Vision</td>
<td>338205</td>
<td style="text-align:right">208971 (61.79%)</td>
<td style="text-align:right">208971 (61.79%)</td>
</tr>
<tr>
<td>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/systolic-blood-pressure/1">https://github.com/rw251/.../tests/systolic-blood-pressure/1</a></td>
<td></td>
<td></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>
<h3>Diastolic Blood pressure</h3>
<p>Any diastolic blood pressure measurements, with values, that have been recorded for a patient.</p>
<p>Blood pressure codes retrieved from <a href="https://getset.ga">GetSet</a> and metadata available in this directory.</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>64.46% - 67.00%</code> suggests that this code set is likely well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-10-13</td>
<td>EMIS</td>
<td>26929848</td>
<td style="text-align:right">1741082 (66.21%)</td>
<td style="text-align:right">1741077 (66.21%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>TPP</td>
<td>211812</td>
<td style="text-align:right">137567 (64.95%)</td>
<td style="text-align:right">137567 (64.95%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>Vision</td>
<td>338205</td>
<td style="text-align:right">208958 (61.79%)</td>
<td style="text-align:right">208958 (61.79%)</td>
</tr>
<tr>
<td>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/diastolic-blood-pressure/1">https://github.com/rw251/.../tests/diastolic-blood-pressure/1</a></td>
<td></td>
<td></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>
<h3>Urinary Albmin Creatinine Ratio</h3>
<p>A patient's urinary albumin creatinine ratio as recorded via clinical code and value. This code set only includes codes that are accompanied by a value. It does not include codes that indicate a patient's ratio without giving the actual value.</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>10.91% - 14.61%</code> is possibly not sufficiently narrow to guarantee that this code set is well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2022-03-28</td>
<td>EMIS</td>
<td>2658708</td>
<td style="text-align:right">329218 (12.38%)</td>
<td style="text-align:right">329218 (12.38%)</td>
</tr>
<tr>
<td>2022-03-28</td>
<td>TPP</td>
<td>212645</td>
<td style="text-align:right">31083 (14.61%)</td>
<td style="text-align:right">31083 (14.61%)</td>
</tr>
<tr>
<td>2022-03-28</td>
<td>Vision</td>
<td>341667</td>
<td style="text-align:right">37285 (10.91%)</td>
<td style="text-align:right">37285 (10.91%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/urinary-albumin-creatinine-ratio/1">https://github.com/rw251/.../tests/urinary-albumin-creatinine-ratio/1</a></p>
<h3>Height</h3>
<p>A patient's height as recorded via clinical code and value. This code set only includes codes that are accompanied by a value (<code>229.. - O/E - Height</code>).</p>
<p>Codes taken from https://www.medrxiv.org/content/medrxiv/suppl/2020/05/19/2020.05.14.20101626.DC1/2020.05.14.20101626-1.pdf</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>66.10% - 72.59%</code> suggests that this code set is well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-10-13</td>
<td>EMIS</td>
<td>26929848</td>
<td style="text-align:right">1885015 (71.68%)</td>
<td style="text-align:right">1884110 (71.64%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>TPP</td>
<td>211812</td>
<td style="text-align:right">140013 (66.10%)</td>
<td style="text-align:right">140013 (66.10%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>Vision</td>
<td>338205</td>
<td style="text-align:right">245440 (72.59%)</td>
<td style="text-align:right">245440 (72.57%)</td>
</tr>
<tr>
<td>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/height/1">https://github.com/rw251/.../patient/height/1</a></td>
<td></td>
<td></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>
<h3>Weight</h3>
<p>A patient's weight as recorded via clinical code and value. This code set only includes codes that are accompanied by a value.</p>
<p>Codes taken from https://www.medrxiv.org/content/medrxiv/suppl/2020/05/19/2020.05.14.20101626.DC1/2020.05.14.20101626-1.pdf</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>73.09% - 79.68%</code> suggests that this code set is well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-10-13</td>
<td>EMIS</td>
<td>26929848</td>
<td style="text-align:right">2054449 (78.12%)</td>
<td style="text-align:right">2053717 (78.09%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>TPP</td>
<td>211812</td>
<td style="text-align:right">154813 (73.09%)</td>
<td style="text-align:right">154813 (73.09%)</td>
</tr>
<tr>
<td>2021-10-13</td>
<td>Vision</td>
<td>338205</td>
<td style="text-align:right">269496 (79.68%)</td>
<td style="text-align:right">269496 (79.68%)</td>
</tr>
<tr>
<td>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/weight/1">https://github.com/rw251/.../patient/weight/1</a></td>
<td></td>
<td></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>
<h3>Body Mass Index (BMI)</h3>
<p>A patient's BMI as recorded via clinical code and value. This code set only includes codes that are accompanied by a value (<code>22K.. - Body Mass Index</code>). It does not include codes that indicate a patient's BMI (<code>22K6. - Body mass index less than 20</code>) without giving the actual value.</p>
<p><strong>NB: This code set is intended to indicate a patient's BMI. If you need to know whether a BMI was recorded then please use v1 of the code set.</strong></p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>63.96% - 79.69%</code> suggests that this code set is perhaps not well defined. However, as EMIS (80% of practices) and TPP (10% of practices) are close, it could simply be down to Vision automatically recording BMIs and therefore increasing the prevalence there.</p>
<p><strong>UPDATE</strong> By looking at the prevalence of patients with a BMI code that also has a non-zero value the range becomes <code>62.48% - 64.93%</code> which suggests that this code set is well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2021-05-07</td>
<td>EMIS</td>
<td>2605681</td>
<td style="text-align:right">1709250 (65.60%)</td>
<td style="text-align:right">1709224 (65.60%)</td>
</tr>
<tr>
<td>2021-05-07</td>
<td>TPP</td>
<td>210817</td>
<td style="text-align:right">134841 (63.96%)</td>
<td style="text-align:right">134835 (63.96%)</td>
</tr>
<tr>
<td>2021-05-07</td>
<td>Vision</td>
<td>334632</td>
<td style="text-align:right">266612 (79.67%)</td>
<td style="text-align:right">266612 (79.67%)</td>
</tr>
<tr>
<td>2021-05-11</td>
<td>EMIS</td>
<td>2606497</td>
<td style="text-align:right">1692442 (64.93%)</td>
<td style="text-align:right">1692422 (64.93%)</td>
</tr>
<tr>
<td>2021-05-11</td>
<td>TPP</td>
<td>210810</td>
<td style="text-align:right">134652 (63.87%)</td>
<td style="text-align:right">134646 (63.87%)</td>
</tr>
<tr>
<td>2021-05-11</td>
<td>Vision</td>
<td>334784</td>
<td style="text-align:right">209175 (62.48%)</td>
<td style="text-align:right">209175 (62.48%)</td>
</tr>
</tbody>
</table>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/bmi/2">https://github.com/rw251/.../patient/bmi/2</a></p>
<h3>Smoking status current</h3>
<p>Any code suggestive that a patient is a current smoker.</p>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/smoking-status-current/1">https://github.com/rw251/.../patient/smoking-status-current/1</a></p>
<h3>Smoking status currently not</h3>
<p>Any code suggestive that a patient is currently a non-smoker. This is different to the &quot;never smoked&quot; code set.</p>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/smoking-status-currently-not/1">https://github.com/rw251/.../patient/smoking-status-currently-not/1</a></p>
<h3>Smoking status ex</h3>
<p>Any code suggestive that a patient is an ex-smoker.</p>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/smoking-status-ex/1">https://github.com/rw251/.../patient/smoking-status-ex/1</a></p>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/smoking-status-ex-trivial/1">https://github.com/rw251/.../patient/smoking-status-ex-trivial/1</a></p>
<h3>Smoking status never</h3>
<p>Any code suggestive that a patient has never smoked. This is different to the &quot;currently not&quot; code set.</p>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/smoking-status-never/1">https://github.com/rw251/.../patient/smoking-status-never/1</a></p>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/smoking-status-passive/1">https://github.com/rw251/.../patient/smoking-status-passive/1</a></p>
<p>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/smoking-status-trivial/1">https://github.com/rw251/.../patient/smoking-status-trivial/1</a></p>
<h1>Clinical code sets</h1>
<p>All code sets required for this analysis are available here: <a href="https://github.com/rw251/gm-idcr/tree/master/projects/032%20-%20Rutter/clinical-code-sets.csv">https://github.com/rw251/.../032 - Rutter/clinical-code-sets.csv</a>. Individual lists for each concept can also be found by using the links above.</p>
