_This file is autogenerated. Please do not edit._

# Variation in frailty across the city of Greater Manchester and the influence of frailty on adverse consequences of COVID-19 infection as measured by hospital admission or death

## Summary

Frailty is a clinical syndrome characterised by increased vulnerability to adverse health outcomes including falls, fractures and increased use of health and social care services. Data from population surveys suggest that overall approximately one in twelve men and women in the UK age 50 years have evidence of frailty. However, to date there are no data characterising the distribution of frailty across a large urban conurbation and exploring how it varies by small area, level of deprivation and ethnicity. Such data are important in understanding the causes of frailty and informing strategies for prevention aimed at reducing inequalities in ageing.

We hypothesise that within GM, areas with a high risk of frailty would be associated with a high risk also of less favourable COVID-19 outcome and that identification of areas at high risk would provide opportunities for targeted prevention measures as we move into the period of living with the COVID-19 virus.

## Table of contents

- [Introduction](#introduction)
- [Methodology](#methodology)
- [Reusable queries](#reusable-queries)
- [Clinical code sets](#clinical-code-sets)

## Introduction

The aim of this document is to provide full transparency for all parts of the data extraction process.
This includes:

- The methodology around how the data extraction process is managed and quality is maintained.
- A full list of all queries used in the extraction, and their associated objectives and assumptions.
- A full list of all clinical codes used for the extraction.

## Methodology

After each proposal is approved, a Research Data Engineer (RDE) works closely with the research team to establish precisely what data they require and in what format.
The RDE has access to the entire de-identified database and so builds up an expertise as to which projects are feasible and how best to extract the relevant data.
The RDE has access to a library of resusable SQL queries for common tasks, and sets of clinical codes for different phenotypes, built up from previous studies.
Prior to data extraction, the code is checked and signed off by another RDE.

## Reusable queries
  
This project required the following reusable queries:

- Calcluate Electronic Frailty Index
- Electronic Frailty Index common queries
- Electronic Frailty Index subquery
- Electronic Frailty Index subquery
- Townsend Score (2011)
- Lower level super output area
- Sex
- Define Cohort for RQ038: COVID + frailty project
- Year of birth
- Patients with COVID

Further details for each query can be found below.

### Calcluate Electronic Frailty Index
To calculate the EFI for all patients and how it has changed over time

_Input_
```
Takes three parameters
	-	all-patients: boolean - (true/false) if true, then all patients are included, otherwise only those in the pre-existing #Patients table.
	- gp-events-table: string - (table name) the name of the table containing the GP events. Usually is "SharedCare.GP_Events" but can be anything with the columns: FK_Patient_Link_ID, EventDate, and SuppliedCode
	- gp-medications-table: string - (table name) the name of the table containing the GP medications. Usually is "SharedCare.GP_Medications" but can be anything with the columns: FK_Patient_Link_ID, MedicationDate, and SuppliedCode
```

_Output_
```
One temp tables as follows:
	#PatientEFIOverTime (FK_Patient_Link_ID, NumberOfDeficits, DateFrom)
	- FK_Patient_Link_ID - unique patient id
	- DateFrom - the date from which the patient had this number of deficits
	- NumberOfDeficits - the number of deficits (e.g. 3)
```
_File_: `query-patients-calculate-efi-over-time.sql`

_Link_: [https://github.com/rw251/.../query-patients-calculate-efi-over-time.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patients-calculate-efi-over-time.sql)

---
### Electronic Frailty Index common queries
The common logic for 2 EFI queries. This is unlikely to be executed directly, but is used by the other queries.

_Input_
```
Takes three parameters
	-	all-patients: boolean - (true/false) if false, then only those in the pre-existing #Patients table are included, otherwise everyone.
	- gp-events-table: string - (table name) the name of the table containing the GP events. Usually is "SharedCare.GP_Events" but can be anything with the columns: FK_Patient_Link_ID, EventDate, and SuppliedCode
	- gp-medications-table: string - (table name) the name of the table containing the GP medications. Usually is "SharedCare.GP_Medications" but can be anything with the columns: FK_Patient_Link_ID, MedicationDate, and SuppliedCode
```

_Output_
```
Two temp tables as follows:
	#EfiEvents (FK_Patient_Link_ID,	Deficit, EventDate)
	- FK_Patient_Link_ID - unique patient id
	- Deficit - the deficit (e.g. 'diabetes/hypertension/falls')
	- EventDate - the first occurance of the deficit

	#PolypharmacyPeriods (FK_Patient_Link_ID,	DateFrom,	DateTo)
	- FK_Patient_Link_ID - unique patient id
	- DateFrom - the start date of the polypharmacy period
	- DateTo - the end date of the polypharmacy period
```
_File_: `subquery-efi-common.sql`

_Link_: [https://github.com/rw251/.../subquery-efi-common.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/subquery-efi-common.sql)

---
### Electronic Frailty Index subquery
Subquery for the EFI calculation to ensure consistency. This allows a code with a value within a range to be counted towards a deficit

_Input_
```
Assumes there exists a temp table #EfiEvents(FK_Patient_Link_ID, Deficit, EventDate) and
        a temp table #EfiValueData(FK_Patient_Link_ID, EventDate, SuppliedCode, Value)
  ALso takes three parameters
  - efi-category: string - e.g. "activity-limitation" to match the "efi-activity-limitation" code set
	-	all-patients: boolean - (true/false) if false, then only those in the pre-existing #Patients table are included, otherwise everyone.
	-	patients: temp table name - OPTIONAL - e.g. "#Patients" allows filtering to just some patients
	- supplied-codes: string - (of form 'code','code2',...,'coden') the codes to include
  - min-value: int - OPTIONAL - The minimum value to count. Strict inequality so "0" would become >0
  - max-value: int - OPTIONAL - The maximum value to count. Strict inequality so "0" would become <0
```

_Output_
```
None. This populates the pre-existing #EfiEvents table with the first time the patient experienced the deficit specified by the efi-category.
```
_File_: `subquery-efi-values.sql`

_Link_: [https://github.com/rw251/.../subquery-efi-values.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/subquery-efi-values.sql)

---
### Electronic Frailty Index subquery
Subquery for the EFI calculation to ensure consistency instead of copy/pasting the same code 35 times.

_Input_
```
Assumes there exists a temp table #EfiEvents(FK_Patient_Link_ID, Deficit, EventDate)
  ALso takes three parameters
  - efi-category: string - e.g. "activity-limitation" to match the "efi-activity-limitation" code set
	-	all-patients: boolean - (true/false) if false, then only those in the pre-existing #Patients table are included, otherwise everyone.
	- gp-events-table: string - (table name) the name of the table containing the GP events. Usually is "SharedCare.GP_Events" but can be anything with the columns: FK_Patient_Link_ID, EventDate, and SuppliedCode
```

_Output_
```
None. This populates the pre-existing #EfiEvents table with the first time the patient experienced the deficit specified by the efi-category.
```
_File_: `subquery-efi.sql`

_Link_: [https://github.com/rw251/.../subquery-efi.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/subquery-efi.sql)

---
### Townsend Score (2011)
To get the 2011 Townsend score and quintile for each patient.

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
A temp table as follows:
 #PatientTownsend (FK_Patient_Link_ID, TownsendScoreHigherIsMoreDeprived, TownsendQuintileHigherIsMoreDeprived)
 	- FK_Patient_Link_ID - unique patient id
	- TownsendScoreHigherIsMoreDeprived - number range approx [-7,13]
	- TownsendQuintileHigherIsMoreDeprived - number 1 to 5 inclusive
```
_File_: `query-patient-townsend.sql`

_Link_: [https://github.com/rw251/.../query-patient-townsend.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-townsend.sql)

---
### Lower level super output area
To get the LSOA for each patient.

_Assumptions_

- Patient data is obtained from multiple sources. Where patients have multiple LSOAs we determine the LSOA as follows:
- If the patients has an LSOA in their primary care data feed we use that as most likely to be up to date
- If every LSOA for a paitent is the same, then we use that
- If there is a single most recently updated LSOA in the database then we use that
- Otherwise the patient's LSOA is considered unknown

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
A temp table as follows:
 #PatientLSOA (FK_Patient_Link_ID, LSOA)
 	- FK_Patient_Link_ID - unique patient id
	- LSOA_Code - nationally recognised LSOA identifier
```
_File_: `query-patient-lsoa.sql`

_Link_: [https://github.com/rw251/.../query-patient-lsoa.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-lsoa.sql)

---
### Sex
To get the Sex for each patient.

_Assumptions_

- Patient data is obtained from multiple sources. Where patients have multiple sexes we determine the sex as follows:
- If the patients has a sex in their primary care data feed we use that as most likely to be up to date
- If every sex for a patient is the same, then we use that
- If there is a single most recently updated sex in the database then we use that
- Otherwise the patient's sex is considered unknown

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
A temp table as follows:
 #PatientSex (FK_Patient_Link_ID, Sex)
 	- FK_Patient_Link_ID - unique patient id
	- Sex - M/F
```
_File_: `query-patient-sex.sql`

_Link_: [https://github.com/rw251/.../query-patient-sex.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-sex.sql)

---
### Define Cohort for RQ038: COVID + frailty project
To build the cohort of patients needed for RQ038. This reduces duplication of code in the template scripts. The cohort is any patient who was >=60 years old on 1 Jan 2020 and have at least one GP recorded positive COVID test

_Input_
```
A variable:
	@TEMPRQ038EndDate - the date that we will not get records beyond
```

_Output_
```
Temp tables as follows:
 #Patients - list of patient ids of the cohort
```
_File_: `query-build-rq038-cohort.sql`

_Link_: [https://github.com/rw251/.../query-build-rq038-cohort.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-build-rq038-cohort.sql)

---
### Year of birth
To get the year of birth for each patient.

_Assumptions_

- Patient data is obtained from multiple sources. Where patients have multiple YOBs we determine the YOB as follows:
- If the patients has a YOB in their primary care data feed we use that as most likely to be up to date
- If every YOB for a patient is the same, then we use that
- If there is a single most recently updated YOB in the database then we use that
- Otherwise we take the highest YOB for the patient that is not in the future

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
A temp table as follows:
 #PatientYearOfBirth (FK_Patient_Link_ID, YearOfBirth)
 	- FK_Patient_Link_ID - unique patient id
	- YearOfBirth - INT
```
_File_: `query-patient-year-of-birth.sql`

_Link_: [https://github.com/rw251/.../query-patient-year-of-birth.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-year-of-birth.sql)

---
### Patients with COVID
To get tables of all patients with a COVID diagnosis in their record. This now includes a table that has reinfections. This uses a 90 day cut-off to rule out patients that get multiple tests for a single infection. This 90 day cut-off is also used in the government COVID dashboard. In the first wave, prior to widespread COVID testing, and prior to the correct clinical codes being	available to clinicians, infections were recorded in a variety of ways. We therefore take the first diagnosis from any code indicative of COVID. However, for subsequent infections we insist on the presence of a positive COVID test (PCR or antigen) as opposed to simply a diagnosis code. This is to avoid the situation where a hospital diagnosis code gets entered into the primary care record several months after the actual infection.

_Input_
```
Takes three parameters
  - start-date: string - (YYYY-MM-DD) the date to count diagnoses from. Usually this should be 2020-01-01.
	-	all-patients: boolean - (true/false) if true, then all patients are included, otherwise only those in the pre-existing #Patients table.
	- gp-events-table: string - (table name) the name of the table containing the GP events. Usually is "SharedCare.GP_Events" but can be anything with the columns: FK_Patient_Link_ID, EventDate, and SuppliedCode
```

_Output_
```
Three temp tables as follows:
 #CovidPatients (FK_Patient_Link_ID, FirstCovidPositiveDate)
 	- FK_Patient_Link_ID - unique patient id
	- FirstCovidPositiveDate - earliest COVID diagnosis
 #CovidPatientsAllDiagnoses (FK_Patient_Link_ID, CovidPositiveDate)
 	- FK_Patient_Link_ID - unique patient id
	- CovidPositiveDate - any COVID diagnosis
 #CovidPatientsMultipleDiagnoses
	-	FK_Patient_Link_ID - unique patient id
	-	FirstCovidPositiveDate - date of first COVID diagnosis
	-	SecondCovidPositiveDate - date of second COVID diagnosis
	-	ThirdCovidPositiveDate - date of third COVID diagnosis
	-	FourthCovidPositiveDate - date of fourth COVID diagnosis
	-	FifthCovidPositiveDate - date of fifth COVID diagnosis
```
_File_: `query-patients-with-covid.sql`

_Link_: [https://github.com/rw251/.../query-patients-with-covid.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patients-with-covid.sql)
## Clinical code sets

This project required the following clinical code sets:

- covid-positive-antigen-test v1
- covid-positive-pcr-test v1
- covid-positive-test-other v1
- hypertension v1
- efi-activity-limitation v1
- efi-anaemia v1
- efi-arthritis v1
- efi-atrial-fibrillation v1
- efi-chd v1
- efi-ckd v1
- efi-diabetes v1
- efi-dizziness v1
- efi-dyspnoea v1
- efi-falls v1
- efi-foot-problems v1
- efi-fragility-fracture v1
- efi-hearing-loss v1
- efi-heart-failure v1
- efi-heart-valve-disease v1
- efi-housebound v1
- efi-hypertension v1
- efi-hypotension v1
- efi-cognitive-problems v1
- efi-mobility-problems v1
- efi-osteoporosis v1
- efi-parkinsons v1
- efi-peptic-ulcer v1
- efi-pvd v1
- efi-care-requirement v1
- efi-respiratory-disease v1
- efi-skin-ulcer v1
- efi-sleep-disturbance v1
- efi-social-vulnerability v1
- efi-stroke-tia v1
- efi-thyroid-disorders v1
- efi-urinary-incontinence v1
- efi-urinary-system-disease v1
- efi-vision-problems v1
- efi-weight-loss v1

Further details for each code set can be found below.

### COVID-19 positive antigen test

A code that indicates that a person has a positive antigen test for COVID-19.
#### COVID positive tests in primary care

The codes used in primary care to indicate a positive COVID test can be split into 3 types: antigen test, PCR test and other. We keep these as separate code sets. However due to the way that COVID diagnoses are recorded in different ways in different GP systems, and because some codes are ambiguous, currently it only makes sense to group these 3 code sets together. Therefore the prevalence log below is for the combined code sets of `covid-positive-antigen-test`, `covid-positive-pcr-test` and `covid-positive-test-other`.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `18.6% - 20.5%` suggests that this code set is likely well defined. _NB - this code set needs to rely on the SuppliedCode in the database rather than the foreign key ids._

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-02-25 | EMIS            | 2656041    |   152972 (5.76%) |    545759 (20.5%) |
| 2022-02-25 | TPP             | 212453     |      256 (0.12%) |     39503 (18.6%) |
| 2022-02-25 | Vision          | 341354     |     9440 (2.77%) |     65963 (19.3%) |

LINK: [https://github.com/rw251/.../tests/covid-positive-antigen-test/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/covid-positive-antigen-test/1)

### COVID-19 positive pcr test

A code that indicates that a person has a positive pcr test for COVID-19.
#### COVID positive tests in primary care

The codes used in primary care to indicate a positive COVID test can be split into 3 types: antigen test, PCR test and other. We keep these as separate code sets. However due to the way that COVID diagnoses are recorded in different ways in different GP systems, and because some codes are ambiguous, currently it only makes sense to group these 3 code sets together. Therefore the prevalence log below is for the combined code sets of `covid-positive-antigen-test`, `covid-positive-pcr-test` and `covid-positive-test-other`.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `18.6% - 20.5%` suggests that this code set is likely well defined. _NB - this code set needs to rely on the SuppliedCode in the database rather than the foreign key ids._

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-02-25 | EMIS            | 2656041    |   152972 (5.76%) |    545759 (20.5%) |
| 2022-02-25 | TPP             | 212453     |      256 (0.12%) |     39503 (18.6%) |
| 2022-02-25 | Vision          | 341354     |     9440 (2.77%) |     65963 (19.3%) |

LINK: [https://github.com/rw251/.../tests/covid-positive-pcr-test/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/covid-positive-pcr-test/1)

### COVID-19 positive test - other

A code that indicates that a person has a positive test for COVID-19, but where the type of test (antigen or PCR) is unknown.
#### COVID positive tests in primary care

The codes used in primary care to indicate a positive COVID test can be split into 3 types: antigen test, PCR test and other. We keep these as separate code sets. However due to the way that COVID diagnoses are recorded in different ways in different GP systems, and because some codes are ambiguous, currently it only makes sense to group these 3 code sets together. Therefore the prevalence log below is for the combined code sets of `covid-positive-antigen-test`, `covid-positive-pcr-test` and `covid-positive-test-other`.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `18.6% - 20.5%` suggests that this code set is likely well defined. _NB - this code set needs to rely on the SuppliedCode in the database rather than the foreign key ids._

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-02-25 | EMIS            | 2656041    |   152972 (5.76%) |    545759 (20.5%) |
| 2022-02-25 | TPP             | 212453     |      256 (0.12%) |     39503 (18.6%) |
| 2022-02-25 | Vision          | 341354     |     9440 (2.77%) |     65963 (19.3%) |

LINK: [https://github.com/rw251/.../tests/covid-positive-test-other/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/covid-positive-test-other/1)

### Hypertension

Any diagnosis of hypertension. Excludes hypertension in pregnancy, gestational hyptertension, pre-eclampsia. Based on the QOF code sets for hypertension.

Developed from https://getset.ga.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `12.55% - 12.95%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2021-07-14 | EMIS            | 2615750    |  328350 (12.55%) |  328339 ( 12.55%) |
| 2021-07-14 | TPP             | 211345     |   27363 (12.95%) |   27362 ( 12.95%) |
| 2021-07-14 | Vision          | 336528     |   43389 (12.89%) |   43389 ( 12.89%) |

LINK: [https://github.com/rw251/.../conditions/hypertension/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/hypertension/1)

### Activity limitation (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../patient/efi-activity-limitation/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/efi-activity-limitation/1)

### Anaemia (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../patient/efi-anaemia/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/efi-anaemia/1)

### Arthritis (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-arthritis/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-arthritis/1)

### Atrial fibrillation (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-atrial-fibrillation/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-atrial-fibrillation/1)

### Coronary heart disease - CHD (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-chd/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-chd/1)

### Chronic kidney disease - CKD (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-ckd/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-ckd/1)

### Diabetes (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-diabetes/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-diabetes/1)

### Dizziness (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../patient/efi-dizziness/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/efi-dizziness/1)

### Dyspnoea (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../patient/efi-dyspnoea/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/efi-dyspnoea/1)

### Falls (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../patient/efi-falls/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/efi-falls/1)

### Foot problems (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-foot-problems/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-foot-problems/1)

### Fragility fracture (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-fragility-fracture/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-fragility-fracture/1)

### Hearing loss (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-hearing-loss/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-hearing-loss/1)

### Heart failure (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-heart-failure/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-heart-failure/1)

### Heart valve disease (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-heart-valve-disease/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-heart-valve-disease/1)

### Housebound (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../patient/efi-housebound/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/efi-housebound/1)

### Hypertension (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-hypertension/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-hypertension/1)

### Hypotension (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-hypotension/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-hypotension/1)

### Cognitive problems (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../patient/efi-cognitive-problems/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/efi-cognitive-problems/1)

### Mobility problems (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../patient/efi-mobility-problems/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/efi-mobility-problems/1)

### Osteoporosis (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-osteoporosis/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-osteoporosis/1)

### Parkinsons (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-parkinsons/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-parkinsons/1)

### Peptic ulcer (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-peptic-ulcer/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-peptic-ulcer/1)

### Peripheral vascular disease - PVD (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-pvd/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-pvd/1)

### Care requirement (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../patient/efi-care-requirement/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/efi-care-requirement/1)

### Respiratory disease (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-respiratory-disease/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-respiratory-disease/1)

### Skin ulcer (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-skin-ulcer/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-skin-ulcer/1)

### Sleep disturbance (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../patient/efi-sleep-disturbance/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/efi-sleep-disturbance/1)

### Social vulnerability (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../patient/efi-social-vulnerability/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/efi-social-vulnerability/1)

### Stroke / trans ischaemic attach - TIA (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-stroke-tia/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-stroke-tia/1)

### Thyroid disorders (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-thyroid-disorders/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-thyroid-disorders/1)

### Urinary incontinence (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../patient/efi-urinary-incontinence/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/efi-urinary-incontinence/1)

### Urinary system disease (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-urinary-system-disease/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-urinary-system-disease/1)

### Vision problems (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../conditions/efi-vision-problems/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/efi-vision-problems/1)

### Weight loss (for electronic frailty index)

These are the codes from the original electronic frailty index (EFI). Our aim is to produce an EFI comparably to that used in practice and so we simply reproduce the codes sets and do not attempt further validation.

LINK: [https://github.com/rw251/.../patient/efi-weight-loss/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/efi-weight-loss/1)
# Clinical code sets

All code sets required for this analysis are available here: [https://github.com/rw251/.../038 - O'Neill/clinical-code-sets.csv](https://github.com/rw251/gm-idcr/tree/master/projects/038%20-%20O'Neill/clinical-code-sets.csv). Individual lists for each concept can also be found by using the links above.