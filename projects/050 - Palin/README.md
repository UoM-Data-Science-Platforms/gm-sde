_This file is autogenerated. Please do not edit._

# _TODO_ - project title

## Summary

**TODO** edit `about.md` to insert a brief lay summary of the work.

## Table of contents

- [Introduction](#introduction)
- [Methodology](#methodology)
- [Reusable queries](#reusable-queries)
- [Clinical code sets](#clinical-code-sets)

## Introduction

The aim of this document is to provide full transparency for all parts of the data extraction process.
This includes:

- The methodology around how the data extraction process is managed and quality is maintained.
- A full list of all queries used in the extraction, and their associated objectives and assumptions.
- A full list of all clinical codes used for the extraction.

## Methodology

After each proposal is approved, a Research Data Engineer (RDE) works closely with the research team to establish precisely what data they require and in what format.
The RDE has access to the entire de-identified database and so builds up an expertise as to which projects are feasible and how best to extract the relevant data.
The RDE has access to a library of resusable SQL queries for common tasks, and sets of clinical codes for different phenotypes, built up from previous studies.
Prior to data extraction, the code is checked and signed off by another RDE.

## Reusable queries
  
This project required the following reusable queries:

- BMI
- Smoking status
- Lower level super output area
- Index Multiple Deprivation
- GET practice and ccg for each patient
- CCG lookup table
- Patient GP history
- COVID-related secondary admissions
- Patients with COVID
- Secondary admissions and length of stay
- Secondary discharges
- Define Cohort for RQ050
- Sex
- Year of birth
- Classify secondary admissions
- Create table of patients who are registered with a GM GP

Further details for each query can be found below.

### BMI
To get the BMI for each patient in a cohort.

_Assumptions_

- We take the measurement closest to @IndexDate to be correct

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
 Also takes one parameter:
	- gp-events-table: string - (table name) the name of the table containing the GP events. Usually is "RLS.vw_GP_Events" but can be anything with the columns: FK_Patient_Link_ID, EventDate, FK_Reference_Coding_ID, and FK_Reference_SnomedCT_ID
 Also assumes there is an @IndexDate defined - The index date of the study
```

_Output_
```
A temp table as follows:
 #PatientBMI (FK_Patient_Link_ID, BMI, DateOfBMIMeasurement)
	- FK_Patient_Link_ID - unique patient id
  - BMI
  - DateOfBMIMeasurement
```
_File_: `query-patient-bmi.sql`

_Link_: [https://github.com/rw251/.../query-patient-bmi.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-bmi.sql)

---
### Smoking status
To get the smoking status for each patient in a cohort.

_Assumptions_

- We take the most recent smoking status in a patient's record to be correct
- However, there is likely confusion between the "non smoker" and "never smoked" codes. Especially as sometimes the synonyms for these codes overlap. Therefore, a patient wih a most recent smoking status of "never", but who has previous smoking codes, would be classed as WorstSmokingStatus=non-trivial-smoker / CurrentSmokingStatus=non-smoker

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
 Also takes one parameter:
	- gp-events-table: string - (table name) the name of the table containing the GP events. Usually is "RLS.vw_GP_Events" but can be anything with the columns: FK_Patient_Link_ID, EventDate, FK_Reference_Coding_ID, and FK_Reference_SnomedCT_ID
```

_Output_
```
A temp table as follows:
 #PatientSmokingStatus (FK_Patient_Link_ID, PassiveSmoker, WorstSmokingStatus, CurrentSmokingStatus)
	- FK_Patient_Link_ID - unique patient id
	- PassiveSmoker - Y/N (whether a patient has ever had a code for passive smoking)
	- WorstSmokingStatus - [non-trivial-smoker/trivial-smoker/non-smoker]
	- CurrentSmokingStatus - [non-trivial-smoker/trivial-smoker/non-smoker]
```
_File_: `query-patient-smoking-status.sql`

_Link_: [https://github.com/rw251/.../query-patient-smoking-status.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-smoking-status.sql)

---
### Lower level super output area
To get the LSOA for each patient.

_Assumptions_

- Patient data is obtained from multiple sources. Where patients have multiple LSOAs we determine the LSOA as follows:
- If the patients has an LSOA in their primary care data feed we use that as most likely to be up to date
- If every LSOA for a paitent is the same, then we use that
- If there is a single most recently updated LSOA in the database then we use that
- Otherwise the patient's LSOA is considered unknown

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
A temp table as follows:
 #PatientLSOA (FK_Patient_Link_ID, LSOA)
 	- FK_Patient_Link_ID - unique patient id
	- LSOA_Code - nationally recognised LSOA identifier
```
_File_: `query-patient-lsoa.sql`

_Link_: [https://github.com/rw251/.../query-patient-lsoa.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-lsoa.sql)

---
### Index Multiple Deprivation
To get the 2019 Index of Multiple Deprivation (IMD) decile for each patient.

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
A temp table as follows:
 #PatientIMDDecile (FK_Patient_Link_ID, IMD2019Decile1IsMostDeprived10IsLeastDeprived)
 	- FK_Patient_Link_ID - unique patient id
	- IMD2019Decile1IsMostDeprived10IsLeastDeprived - number 1 to 10 inclusive
```
_File_: `query-patient-imd.sql`

_Link_: [https://github.com/rw251/.../query-patient-imd.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-imd.sql)

---
### GET practice and ccg for each patient
For each patient to get the practice id that they are registered to, and the CCG name that the practice belongs to.

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
Two temp tables as follows:
 #PatientPractice (FK_Patient_Link_ID, GPPracticeCode)
	- FK_Patient_Link_ID - unique patient id
	- GPPracticeCode - the nationally recognised practice id for the patient
 #PatientPracticeAndCCG (FK_Patient_Link_ID, GPPracticeCode, CCG)
	- FK_Patient_Link_ID - unique patient id
	- GPPracticeCode - the nationally recognised practice id for the patient
	- CCG - the name of the patient's CCG
```
_File_: `query-patient-practice-and-ccg.sql`

_Link_: [https://github.com/rw251/.../query-patient-practice-and-ccg.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-practice-and-ccg.sql)

---
### CCG lookup table
To provide lookup table for CCG names. The GMCR provides the CCG id (e.g. '00T', '01G') but not the CCG name. This table can be used in other queries when the output is required to be a ccg name rather than an id.

_Input_
```
No pre-requisites
```

_Output_
```
A temp table as follows:
 #CCGLookup (CcgId, CcgName)
 	- CcgId - Nationally recognised ccg id
	- CcgName - Bolton, Stockport etc..
```
_File_: `query-ccg-lookup.sql`

_Link_: [https://github.com/rw251/.../query-ccg-lookup.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-ccg-lookup.sql)

---
### Patient GP history
To produce a table showing the start and end dates for each practice the patient has been registered at.

_Assumptions_

- We do not have data on patients who move out of GM, though we do know that it happened. For these patients we record the GPPracticeCode as OutOfArea
- Where two adjacent time periods either overlap, or have a gap between them, we assume that the most recent registration is more accurate and adjust the end date of the first time period accordingly. This is an infrequent occurrence.

_Input_
```
No pre-requisites
```

_Output_
```
A temp table as follows:
 #PatientGPHistory (FK_Patient_Link_ID, GPPracticeCode, StartDate, EndDate)
	- FK_Patient_Link_ID - unique patient id
	- GPPracticeCode - national GP practice id system
	- StartDate - date the patient registered at the practice
	- EndDate - date the patient left the practice
```
_File_: `query-patient-gp-history.sql`

_Link_: [https://github.com/rw251/.../query-patient-gp-history.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-gp-history.sql)

---
### COVID-related secondary admissions
To classify every admission to secondary care based on whether it is a COVID or non-COVID related. A COVID-related admission is classed as an admission within 4 weeks after, or up to 2 weeks before a positive test.

_Input_
```
Takes one parameter
  - start-date: string - (YYYY-MM-DD) the date to count diagnoses from. Usually this should be 2020-01-01.
	-	all-patients: boolean - (true/false) if true, then all patients are included, otherwise only those in the pre-existing #Patients table.
	- gp-events-table: string - (table name) the name of the table containing the GP events. Usually is "RLS.vw_GP_Events" but can be anything with the columns: FK_Patient_Link_ID, EventDate, and SuppliedCode
 And assumes there exists two temp tables as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
 #Admissions (FK_Patient_Link_ID, AdmissionDate, AcuteProvider)
  A distinct list of the admissions for each patient in the cohort
```

_Output_
```
A temp table as follows:
 #COVIDUtilisationAdmissions (FK_Patient_Link_ID, AdmissionDate, AcuteProvider, CovidHealthcareUtilisation)
	- FK_Patient_Link_ID - unique patient id
	- AdmissionDate - date of admission (YYYY-MM-DD)
	- AcuteProvider - Bolton, SRFT, Stockport etc..
	- CovidHealthcareUtilisation - 'TRUE' if admission within 4 weeks after, or up to 14 days before, a positive test
```
_File_: `query-admissions-covid-utilisation.sql`

_Link_: [https://github.com/rw251/.../query-admissions-covid-utilisation.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-admissions-covid-utilisation.sql)

---
### Patients with COVID
To get tables of all patients with a COVID diagnosis in their record. This now includes a table that has reinfections. This uses a 90 day cut-off to rule out patients that get multiple tests for a single infection. This 90 day cut-off is also used in the government COVID dashboard. In the first wave, prior to widespread COVID testing, and prior to the correct clinical codes being	available to clinicians, infections were recorded in a variety of ways. We therefore take the first diagnosis from any code indicative of COVID. However, for subsequent infections we insist on the presence of a positive COVID test (PCR or antigen) as opposed to simply a diagnosis code. This is to avoid the situation where a hospital diagnosis code gets entered into the primary care record several months after the actual infection.

_Input_
```
Takes three parameters
  - start-date: string - (YYYY-MM-DD) the date to count diagnoses from. Usually this should be 2020-01-01.
	-	all-patients: boolean - (true/false) if true, then all patients are included, otherwise only those in the pre-existing #Patients table.
	- gp-events-table: string - (table name) the name of the table containing the GP events. Usually is "SharedCare.GP_Events" but can be anything with the columns: FK_Patient_Link_ID, EventDate, and SuppliedCode
```

_Output_
```
Three temp tables as follows:
 #CovidPatients (FK_Patient_Link_ID, FirstCovidPositiveDate)
 	- FK_Patient_Link_ID - unique patient id
	- FirstCovidPositiveDate - earliest COVID diagnosis
 #CovidPatientsAllDiagnoses (FK_Patient_Link_ID, CovidPositiveDate)
 	- FK_Patient_Link_ID - unique patient id
	- CovidPositiveDate - any COVID diagnosis
 #CovidPatientsMultipleDiagnoses
	-	FK_Patient_Link_ID - unique patient id
	-	FirstCovidPositiveDate - date of first COVID diagnosis
	-	SecondCovidPositiveDate - date of second COVID diagnosis
	-	ThirdCovidPositiveDate - date of third COVID diagnosis
	-	FourthCovidPositiveDate - date of fourth COVID diagnosis
	-	FifthCovidPositiveDate - date of fifth COVID diagnosis
```
_File_: `query-patients-with-covid.sql`

_Link_: [https://github.com/rw251/.../query-patients-with-covid.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patients-with-covid.sql)

---
### Secondary admissions and length of stay
To obtain a table with every secondary care admission, along with the acute provider, the date of admission, the date of discharge, and the length of stay.

_Input_
```
One parameter
	-	all-patients: boolean - (true/false) if true, then all patients are included, otherwise only those in the pre-existing #Patients table.
```

_Output_
```
Two temp table as follows:
 #Admissions (FK_Patient_Link_ID, AdmissionDate, AcuteProvider)
 	- FK_Patient_Link_ID - unique patient id
	- AdmissionDate - date of admission (YYYY-MM-DD)
	- AcuteProvider - Bolton, SRFT, Stockport etc..
  (Limited to one admission per person per hospital per day, because if a patient has 2 admissions
   on the same day to the same hopsital then it's most likely data duplication rather than two short
   hospital stays)
 #LengthOfStay (FK_Patient_Link_ID, AdmissionDate)
 	- FK_Patient_Link_ID - unique patient id
	- AdmissionDate - date of admission (YYYY-MM-DD)
	- AcuteProvider - Bolton, SRFT, Stockport etc..
	- DischargeDate - date of discharge (YYYY-MM-DD)
	- LengthOfStay - Number of days between admission and discharge. 1 = [0,1) days, 2 = [1,2) days, etc.
```
_File_: `query-get-admissions-and-length-of-stay.sql`

_Link_: [https://github.com/rw251/.../query-get-admissions-and-length-of-stay.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-get-admissions-and-length-of-stay.sql)

---
### Secondary discharges
To obtain a table with every secondary care discharge, along with the acute provider, and the date of discharge.

_Input_
```
One parameter
	-	all-patients: boolean - (true/false) if true, then all patients are included, otherwise only those in the pre-existing #Patients table.
```

_Output_
```
A temp table as follows:
 #Discharges (FK_Patient_Link_ID, DischargeDate, AcuteProvider)
 	- FK_Patient_Link_ID - unique patient id
	- DischargeDate - date of discharge (YYYY-MM-DD)
	- AcuteProvider - Bolton, SRFT, Stockport etc..
  (Limited to one discharge per person per hospital per day, because if a patient has 2 discharges
   on the same day to the same hopsital then it's most likely data duplication rather than two short
   hospital stays)
```
_File_: `query-get-discharges.sql`

_Link_: [https://github.com/rw251/.../query-get-discharges.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-get-discharges.sql)

---
### Define Cohort for RQ050
To build the cohort of patients needed for RQ050. This reduces duplication of code in the template scripts.

_Input_
```
assumes there exists one temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
Temp tables as follows:
 #MainCohort
 #MatchedCohort
 #PatientEventData
```
_File_: `query-build-rq050-cohort.sql`

_Link_: [https://github.com/rw251/.../query-build-rq050-cohort.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-build-rq050-cohort.sql)

---
### Sex
To get the Sex for each patient.

_Assumptions_

- Patient data is obtained from multiple sources. Where patients have multiple sexes we determine the sex as follows:
- If the patients has a sex in their primary care data feed we use that as most likely to be up to date
- If every sex for a patient is the same, then we use that
- If there is a single most recently updated sex in the database then we use that
- Otherwise the patient's sex is considered unknown

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
A temp table as follows:
 #PatientSex (FK_Patient_Link_ID, Sex)
 	- FK_Patient_Link_ID - unique patient id
	- Sex - M/F
```
_File_: `query-patient-sex.sql`

_Link_: [https://github.com/rw251/.../query-patient-sex.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-sex.sql)

---
### Year of birth
To get the year of birth for each patient.

_Assumptions_

- Patient data is obtained from multiple sources. Where patients have multiple YOBs we determine the YOB as follows:
- If the patients has a YOB in their primary care data feed we use that as most likely to be up to date
- If every YOB for a patient is the same, then we use that
- If there is a single most recently updated YOB in the database then we use that
- Otherwise we take the highest YOB for the patient that is not in the future

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
A temp table as follows:
 #PatientYearOfBirth (FK_Patient_Link_ID, YearOfBirth)
 	- FK_Patient_Link_ID - unique patient id
	- YearOfBirth - INT
```
_File_: `query-patient-year-of-birth.sql`

_Link_: [https://github.com/rw251/.../query-patient-year-of-birth.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-year-of-birth.sql)

---
### Classify secondary admissions
To categorise admissions to secondary care into 5 categories: Maternity, Unplanned, Planned, Transfer and Unknown.

_Assumptions_

- We assume patients can only have one admission per day. This is probably not true, but where we see multiple admissions it is more likely to be data duplication, or internal admissions, than an admission, discharge and another admission in the same day.
- Where patients have multiple admissions we choose the "highest" category for admission with the categories ranked as follows: Maternity > Unplanned > Planned > Transfer > Unknown
- We have used the following classifications based on the AdmissionTypeCode:
	- PLANNED: PL (ELECTIVE PLANNED), 11 (Elective - Waiting List), WL (ELECTIVE WL), 13 (Elective - Planned), 12 (Elective - Booked), BL (ELECTIVE BOOKED), D (NULL), Endoscopy (Endoscopy), OP (DIRECT OUTPAT CLINIC), Venesection (X36.2 Venesection), Colonoscopy (H22.9 Colonoscopy), Medical (Medical)
	- UNPLANNED: AE (AE.DEPT.OF PROVIDER), 21 (Emergency - Local A&E), I (NULL), GP (GP OR LOCUM GP), 22 (Emergency - GP), 23 (Emergency - Bed Bureau), 28 (Emergency - Other (inc other provider A&E)), 2D (Emergency - Other), 24 (Emergency - Clinic), EM (EMERGENCY OTHER), AI (ACUTE TO INTMED CARE), BB (EMERGENCY BED BUREAU), DO (EMERGENCY DOMICILE), 2A (A+E Department of another provider where the Patient has not been admitted), A+E (Admission	 A+E Admission), Emerg (GP	Emergency GP Patient)
	- MATERNITY: 31 (Maternity ante-partum), BH (BABY BORN IN HOSP), AN (MATERNITY ANTENATAL), 82 (Birth in this Health Care Provider), PN (MATERNITY POST NATAL), B (NULL), 32 (Maternity post-partum), BHOSP (Birth in this Health Care Provider)
	- TRANSFER: 81 (Transfer from other hosp (not A&E)), TR (PLAN TRANS TO TRUST), ET (EM TRAN (OTHER PROV)), HospTran (Transfer from other NHS Hospital), T (TRANSFER), CentTrans (Transfer from CEN Site)
	- OTHER: Anything else not previously classified

_Input_
```
No pre-requisites
```

_Output_
```
A temp table as follows:
 #AdmissionTypes (FK_Patient_Link_ID, AdmissionDate, AcuteProvider, AdmissionType)
 	- FK_Patient_Link_ID - unique patient id
	- AdmissionDate - date of admission (YYYY-MM-DD)
	- AcuteProvider - Bolton, SRFT, Stockport etc..
	- AdmissionType - One of: Maternity/Unplanned/Planned/Transfer/Unknown
```
_File_: `query-classify-secondary-admissions.sql`

_Link_: [https://github.com/rw251/.../query-classify-secondary-admissions.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-classify-secondary-admissions.sql)

---
### Create table of patients who are registered with a GM GP
undefined

_Input_
```
undefined
```

_Output_
```
undefined
```
_File_: `query-get-possible-patients.sql`

_Link_: [https://github.com/rw251/.../query-get-possible-patients.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-get-possible-patients.sql)
## Clinical code sets

This project required the following clinical code sets:

- pregnancy-preterm v1
- pregnancy-postterm v1
- pregnancy-third-trimester v1
- pregnancy-antenatal v1
- pregnancy-postdel-antenatal v1
- pregnancy-lmp v1
- pregnancy-edc v1
- pregnancy-edd v1
- pregnancy-delivery v1
- pregnancy-postnatal-8wk v1
- pregnancy-stillbirth v1
- pregnancy-multiple v1
- pregnancy-ectopic v1
- pregnancy-miscarriage v1
- pregnancy-top v1
- pregnancy-top-probable v1
- pregnancy-molar v1
- pregnancy-blighted-ovum v1
- pregnancy-loss-unspecified v1
- pregnancy-postnatal-other v1
- pregnancy-late-preg v1
- pregnancy-preg-related v1
- covid-positive-antigen-test v1
- covid-positive-pcr-test v1
- covid-positive-test-other v1
- gestational-diabetes v1
- pre-eclampsia v1
- haemoglobin v1
- white-blood-cells v1
- red-blood-cells v1
- platelets v1
- haematocrit v1
- mean-corpuscular-volume v1
- mean-corpuscular-haemoglobin v1
- systolic-blood-pressure v1
- diastolic-blood-pressure v1
- urine-blood v1
- urine-protein v1
- urine-ketones v1
- urine-glucose v1
- smoking-status-current v1
- smoking-status-currently-not v1
- smoking-status-ex v1
- smoking-status-ex-trivial v1
- smoking-status-never v1
- smoking-status-passive v1
- smoking-status-trivial v1
- bmi v2

Further details for each code set can be found below.

### Pre-term Pregnancy

Any codes indicating a pre-term pregnancy.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.59% - 0.89%` suggests that this code set is well defined.

NOTE: Use the IDs rather than codes for this code set. One of the codes (635..) seems to relate to any stage of maturity, not just pre-term, but the IDs for each specific stage are unique.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-28 | EMIS            | 2666725    | 23486 (0.881%)   | 46904 (1.76%)     | 
| 2022-07-28 | TPP             | 213180     | 1894 (0.888%)    | 1971 (0.925%)     |  
| 2022-07-28 | Vision          | 343621     | 2009 (0.585%)    | 24742 (7.2%)      | 
LINK: [https://github.com/rw251/.../patient/pregnancy-preterm/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-preterm/1)

### Post-term Pregnancy

Any codes indicating a post-term pregnancy.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.05% - 0.30%` suggests potential over reporting from EMIS.

NOTE: Use the IDs rather than codes for this code set. One of the codes (635..) seems to relate to any stage of maturity, not just pre-term, but the IDs for each specific stage are unique.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-28 | EMIS            | 2666725    | 7748 (0.291%)    | 36689 (1.38%)     | 
| 2022-07-28 | TPP             | 213180     | 145 (0.068%)     | 211 (0.099%)      | 
| 2022-07-28 | Vision          | 343621     | 161 (0.0469%)    | 24168 (7.03%)     | 
LINK: [https://github.com/rw251/.../patient/pregnancy-postterm/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-postterm/1)

### Third trimester Pregnancy

Any codes related to the third trimester of a pregnancy.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `1.81% - 3.67%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-28 | EMIS            | 2666725    | 47327 (1.77%)    | 48194 (1.81%)     | 
| 2022-07-28 | TPP             | 213180     | 5014 (2.35%)     | 6789 (3.18%)      | 
| 2022-07-28 | Vision          | 343621     | 12623 (3.67%)    | 12628 (3.67%)     | 
LINK: [https://github.com/rw251/.../patient/pregnancy-third-trimester/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-third-trimester/1)

### Antenatal Pregnancy

Any codes indicating antenatal pregnancy.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `14.4% - 18.7%` suggests that this code set is underreporting for Vision practices.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-08-01 | EMIS | 2374802 | 444746 (18.7%) | 335840 (14.1%) | 
| 2022-08-01 | TPP | 195912 | 36311 (18.5%) | 49010 (25%) | 
| 2022-08-01 | Vision | 314772 | 45450 (14.4%) | 43793 (13.9%) | 
LINK: [https://github.com/rw251/.../patient/pregnancy-antenatal/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-antenatal/1)

### Postdelivery Antenatal Pregnancy

Any codes related to postdelivery antenatal pregnancy.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `3.15% - 7.29%` suggests that this code set is underreporting for Vision practices.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-08-17 | EMIS | 2493056 | 135038 (5.42%) | 146386 (5.87%) | 
| 2022-08-17 | TPP | 198292 | 11303 (5.7%) | 14449 (7.29%) | 
| 2022-08-17 | Vision | 327521 | 10388 (3.17%) | 10333 (3.15%) | 
LINK: [https://github.com/rw251/.../patient/pregnancy-postdel-antenatal/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-postdel-antenatal/1)

###  Last Menstrual Period

Any codes indicating last menstrual period.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `4.03% - 5.78%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-28 | EMIS | 2666725 | 113684 (4.26%) | 114134 (4.28%) | 
| 2022-07-28 | TPP | 213180 | 11450 (5.37%) | 12316 (5.78%) | 
| 2022-07-28 | Vision | 343621 | 13840 (4.03%) | 13843 (4.03%) | 
LINK: [https://github.com/rw251/.../patient/pregnancy-lmp/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-lmp/1)

###  Estimated date of conception 

Any codes indicating the estimated conception date for a pregnancy

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.00% - 0.231%` suggests potential under-reporting from Vision and EMIS practices.

update:

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-08-31 | EMIS | 2450268 | 16 (0.000653%) | 56 (0.00229%) | 
| 2022-08-31 | TPP | 198118 | 408 (0.206%) | 457 (0.231%) | 
| 2022-08-31 | Vision | 325609 | 1 (0.000307%) | 0 (0%) | 
LINK: [https://github.com/rw251/.../patient/pregnancy-edc/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-edc/1)

###  Estimated date of delivery 

Any codes indicating the estimated delivery date for a pregnancy

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `1.3% - 4.53%` suggests potential over-reporting from TPP practices.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-08-03 | EMIS | 2374174 | 37196 (1.57%) | 37620 (1.58%) | 
| 2022-08-03 | TPP | 195851 | 8024 (4.1%) | 8871 (4.53%) | 
| 2022-08-03 | Vision | 314695 | 4106 (1.3%) | 4106 (1.3%) | 
LINK: [https://github.com/rw251/.../patient/pregnancy-edd/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-edd/1)

### Pregnancy delivery

Any codes indicating a patient has delivered a baby.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `18.1% - 26.6%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-29 | EMIS | 2374802 | 430005 (18.1%) | 430598 (18.1%) | 
| 2022-07-29 | TPP | 195912 | 47482 (24.2%) | 52112 (26.6%) | 
| 2022-07-29 | Vision | 314772 | 76136 (24.2%) | 77059 (24.5%) | 
LINK: [https://github.com/rw251/.../patient/pregnancy-delivery/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-delivery/1)

###  Postnatal Pregnancy codes within 8 weeks after delivery

Any postnatal codes within 8 weeks after delivery.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `16% - 26.8%` suggests potential over reporting from TPP Practices.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-28 | EMIS | 2666725 | 451381 (16.9%) | 535568 (20.1%) | 
| 2022-07-28 | TPP | 213180 | 57130 (26.8%) | 59615 (28%) | 
| 2022-07-28 | Vision | 343621 | 54931 (16%) | 89547 (26.1%) | 
LINK: [https://github.com/rw251/.../patient/pregnancy-postnatal-8wk/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-postnatal-8wk/1)

### Stillbirth Pregnancy

Any codes indicating a stillbirth pregnancy.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.99% - 1.22%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-28 | EMIS            | 2666725    | 13895 (0.521%)   | 26433 (0.991%)    | 
| 2022-07-28 | TPP             | 213180     | 2357 (1.11%)     | 2610 (1.22%)      | 
| 2022-07-28 | Vision          | 343621     | 1605 (0.467%)    | 4207 (1.22%)      | 
LINK: [https://github.com/rw251/.../patient/pregnancy-stillbirth/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-stillbirth/1)

### Multiple Pregnancy

Any codes indicating a multiple pregnancy.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.81% - 1.91%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-28 | EMIS            | 2666725    | 21628 (0.811%)   | 33370 (1.25%)     | 
| 2022-07-28 | TPP             | 213180     | 4071 (1.91%)     | 4504 (2.11%)      | 
| 2022-07-28 | Vision          | 343621     | 2563 (0.746%)    | 4969 (1.45%)      | 
LINK: [https://github.com/rw251/.../patient/pregnancy-multiple/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-multiple/1)

### Ectopic Pregnancy

Any codes indicating an ectopic pregnancy.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.29% - 0.46%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-29 | EMIS | 2374802 | 5777 (0.243%) | 5831 (0.246%) | 
| 2022-07-29 | TPP | 195912 | 871 (0.445%) | 905 (0.462%) | 
| 2022-07-29 | Vision | 314772 | 952 (0.302%) | 922 (0.293%) | 
LINK: [https://github.com/rw251/.../patient/pregnancy-ectopic/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-ectopic/1)

### Miscarriage Pregnancy

Any codes indicating a miscarriage pregnancy.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.06% - 3.82%` suggests that this code set is well defined.

NOTE: This code set may be affected by some sensitive codes being redacted by Graphnet.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-28 | EMIS | 2666725 | 1637 (0.0614%) | 1967 (0.0738%) | 
| 2022-07-28 | TPP | 213180 | 8141 (3.82%) | 8782 (4.12%) | 
| 2022-07-28 | Vision | 343621 | 3912 (1.14%) | 3905 (1.14%) | 
LINK: [https://github.com/rw251/.../patient/pregnancy-miscarriage/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-miscarriage/1)

### Termination of Pregnancy

Any codes indicating a termination of pregnancy.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.32% - 2.13%` suggests that this code set is well defined.

NOTE: This code set may be underreporting due to some sensitive codes being redacted by Graphnet.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-28 | EMIS            | 2666725    | 7557 (0.283%)    | 8468 (0.318%)     | 
| 2022-07-28 | TPP             | 213180     | 1831 (0.859%)    | 4537 (2.13%)      | 
| 2022-07-28 | Vision          | 343621     | 1404 (0.409%)    | 1407 (0.409%)     | 
LINK: [https://github.com/rw251/.../patient/pregnancy-top/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-top/1)

### Probable termination of Pregnancy

Any codes indicating a probable termination of pregnancy.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.23% - 1.62%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-28 | EMIS            | 2666725    | 5951 (0.223%)    | 6070 (0.228%)     | 
| 2022-07-28 | TPP             | 213180     | 1220 (0.572%)    | 3446 (1.62%)      | 
| 2022-07-28 | Vision          | 343621     | 960 (0.279%)     | 947 (0.276%)      | 
LINK: [https://github.com/rw251/.../patient/pregnancy-top-probable/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-top-probable/1)

### Molar Pregnancy

Any codes indicating a molar pregnancy.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.04% - 0.06%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-28 | EMIS            | 2666725    | 1148 (0.043%)    | 1165 (0.0437%)    | 
| 2022-07-28 | TPP             | 213180     | 138 (0.0647%)    | 146 (0.0685%)     | 
| 2022-07-28 | Vision          | 343621     | 156 (0.0454%)    | 152 (0.0442%)     | 
LINK: [https://github.com/rw251/.../patient/pregnancy-molar/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-molar/1)

### Blighted ovum Pregnancy

Any codes indicating a blighted ovum pregnancy.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.02% - 0.05%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-29 | EMIS | 2666725 | 1353 (0.0507%) | 1357 (0.0509%) | 
| 2022-07-29 | TPP | 213180 | 38 (0.0178%) | 49 (0.023%) | 
| 2022-07-29 | Vision | 343621 | 180 (0.0524%) | 180 (0.0524%) | 
LINK: [https://github.com/rw251/.../patient/pregnancy-blighted-ovum/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-blighted-ovum/1)

### Pregnancy loss unspecified

Any codes indicating an unspecified pregnancy loss

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

update

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `1.21% - 5.27%` suggests potential missing codes or over reporting from TPP.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-28 | EMIS | 2666725 | 31837 (1.19%) | 32248 (1.21%) | 
| 2022-07-28 | TPP | 213180 | 10348 (4.85%) | 11225 (5.27%) | 
| 2022-07-28 | Vision | 343621 | 9874 (2.87%) | 9864 (2.87%) | 
LINK: [https://github.com/rw251/.../patient/pregnancy-loss-unspecified/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-loss-unspecified/1)

###  Postnatal Pregnancy codes with uncertainty around timing

Any codes related to postnatal  without any info on timings.

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `2.03% - 3.89%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-28 | EMIS | 2666725 | 68190 (2.56%) | 73291 (2.75%) | 
| 2022-07-28 | TPP | 213180 | 7586 (3.56%) | 8302 (3.89%) | 
| 2022-07-28 | Vision | 343621 | 5348 (1.56%) | 6978 (2.03%) | 
LINK: [https://github.com/rw251/.../patient/pregnancy-postnatal-other/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-postnatal-other/1)

###  Late pregnancy

Any codes indicating a late pregnancy (<= 3 weeks before delivery)

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.14% - 0.38%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-28 | EMIS | 2666725 | 6754 (0.253%) | 6921 (0.26%) | 
| 2022-07-28 | TPP | 213180 | 582 (0.273%) | 804 (0.377%) | 
| 2022-07-28 | Vision | 343621 | 460 (0.134%) | 480 (0.14%) | 
LINK: [https://github.com/rw251/.../patient/pregnancy-late-preg/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-late-preg/1)

### Pregnancy-related conditions and symptoms

Any codes indicating a symptom or condition related to pregnancy (e.g. L39y500	- Maternal exhaustion).

Code list from supplementary material for this paper: https://onlinelibrary.wiley.com/doi/full/10.1002/pds.4811#:~:text=The%20Pregnancy%20Register%20lists%20and,Mother%2DBaby%20link%20are%20provided
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `6.74% - 9.57%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-07-28 | EMIS | 2666725 | 66529 (2.49%) | 222557 (8.35%) | 
| 2022-07-28 | TPP | 213180 | 11748 (5.51%) | 14370 (6.74%) | 
| 2022-07-28 | Vision | 343621 | 11690 (3.4%) | 32889 (9.57%) | 

LINK: [https://github.com/rw251/.../patient/pregnancy-preg-related/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/pregnancy-preg-related/1)

### COVID-19 positive antigen test

A code that indicates that a person has a positive antigen test for COVID-19.
#### COVID positive tests in primary care

The codes used in primary care to indicate a positive COVID test can be split into 3 types: antigen test, PCR test and other. We keep these as separate code sets. However due to the way that COVID diagnoses are recorded in different ways in different GP systems, and because some codes are ambiguous, currently it only makes sense to group these 3 code sets together. Therefore the prevalence log below is for the combined code sets of `covid-positive-antigen-test`, `covid-positive-pcr-test` and `covid-positive-test-other`.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `18.6% - 20.5%` suggests that this code set is likely well defined. _NB - this code set needs to rely on the SuppliedCode in the database rather than the foreign key ids._

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-02-25 | EMIS            | 2656041    |   152972 (5.76%) |    545759 (20.5%) |
| 2022-02-25 | TPP             | 212453     |      256 (0.12%) |     39503 (18.6%) |
| 2022-02-25 | Vision          | 341354     |     9440 (2.77%) |     65963 (19.3%) |

LINK: [https://github.com/rw251/.../tests/covid-positive-antigen-test/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/covid-positive-antigen-test/1)

### COVID-19 positive pcr test

A code that indicates that a person has a positive pcr test for COVID-19.
#### COVID positive tests in primary care

The codes used in primary care to indicate a positive COVID test can be split into 3 types: antigen test, PCR test and other. We keep these as separate code sets. However due to the way that COVID diagnoses are recorded in different ways in different GP systems, and because some codes are ambiguous, currently it only makes sense to group these 3 code sets together. Therefore the prevalence log below is for the combined code sets of `covid-positive-antigen-test`, `covid-positive-pcr-test` and `covid-positive-test-other`.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `18.6% - 20.5%` suggests that this code set is likely well defined. _NB - this code set needs to rely on the SuppliedCode in the database rather than the foreign key ids._

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-02-25 | EMIS            | 2656041    |   152972 (5.76%) |    545759 (20.5%) |
| 2022-02-25 | TPP             | 212453     |      256 (0.12%) |     39503 (18.6%) |
| 2022-02-25 | Vision          | 341354     |     9440 (2.77%) |     65963 (19.3%) |

LINK: [https://github.com/rw251/.../tests/covid-positive-pcr-test/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/covid-positive-pcr-test/1)

### COVID-19 positive test - other

A code that indicates that a person has a positive test for COVID-19, but where the type of test (antigen or PCR) is unknown.
#### COVID positive tests in primary care

The codes used in primary care to indicate a positive COVID test can be split into 3 types: antigen test, PCR test and other. We keep these as separate code sets. However due to the way that COVID diagnoses are recorded in different ways in different GP systems, and because some codes are ambiguous, currently it only makes sense to group these 3 code sets together. Therefore the prevalence log below is for the combined code sets of `covid-positive-antigen-test`, `covid-positive-pcr-test` and `covid-positive-test-other`.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `18.6% - 20.5%` suggests that this code set is likely well defined. _NB - this code set needs to rely on the SuppliedCode in the database rather than the foreign key ids._

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-02-25 | EMIS            | 2656041    |   152972 (5.76%) |    545759 (20.5%) |
| 2022-02-25 | TPP             | 212453     |      256 (0.12%) |     39503 (18.6%) |
| 2022-02-25 | Vision          | 341354     |     9440 (2.77%) |     65963 (19.3%) |

LINK: [https://github.com/rw251/.../tests/covid-positive-test-other/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/covid-positive-test-other/1)

### Gestational Diabetes 

Any diagnosis of gestational diabetes.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.51% - 0.74%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2023-09-20 | EMIS | 2466262 | 15451 (0.626%) | 15457 (0.627%) | 
| 2023-09-20 | TPP | 200680 | 1489 (0.742%) | 1490 (0.742%) | 
| 2023-09-20 | Vision | 332105 | 1694 (0.51%) | 1640 (0.494%) | 
LINK: [https://github.com/rw251/.../conditions/gestational-diabetes/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/gestational-diabetes/1)

### Pre-eclampsia

Any suggestion of a diagnosis of pre-eclampsia.

Developed from https://getset.ga.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.11% - 0.18%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-06-10 | EMIS            | 2662570    |     3968 (0.15%) |     3934 (0.18%) |
| 2022-06-10 | TPP             | 212696     |      279 (0.13%) |      258 (0.12%) |
| 2022-06-10 | Vision          | 342344     |      372 (0.11%) |      370 (0.11%) |


LINK: [https://github.com/rw251/.../conditions/pre-eclampsia/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/pre-eclampsia/1)

### Haemoglobin

A patient's haemoglobin as recorded via clinical code and value. This code set only includes codes that are accompanied by a value (`423.. - Haemoglobin estimation`). It does not include codes that indicate a patient's haemoglobin (`4235 - Haemoglobin low`) without giving the actual value.

Haemoglobin codes were retrieved from https://www.medrxiv.org/content/medrxiv/suppl/2020/05/19/2020.05.14.20101626.DC1/2020.05.14.20101626-1.pdf.

**NB: This code set is intended to only indicate a patient's haemoglobin values.**
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `61% - 68.1%` suggests that this code set is likely well defined.

update:

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2023-09-18 | EMIS | 2463856 | 1501968 (61%) | 1502094 (61%) | 
| 2023-09-18 | TPP | 200590 | 136648 (68.1%) | 136654 (68.1%) | 
| 2023-09-18 | Vision | 332095 | 206665 (62.2%) | 206678 (62.2%) | 
LINK: [https://github.com/rw251/.../tests/haemoglobin/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/haemoglobin/1)

### White blood cells

This code set only includes codes that are accompanied by a value (e.g. `42H.. - White blood cell count`).

Codes retrieved from: https://www.medrxiv.org/content/medrxiv/suppl/2020/05/19/2020.05.14.20101626.DC1/2020.05.14.20101626-1.pdf
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `59.9% - 68.1%` suggests that this code set is likely well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2023-09-18 | EMIS | 2463856 | 1476970 (59.9%) | 1475393 (59.9%) | 
| 2023-09-18 | TPP | 200590 | 136584 (68.1%) | 136587 (68.1%) | 
| 2023-09-18 | Vision | 332095 | 208915 (62.9%) | 208785 (62.9%) | 

LINK: [https://github.com/rw251/.../tests/white-blood-cells/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/white-blood-cells/1)

### Red blood cells

This code set only includes codes that are accompanied by a value (e.g. `426Z.00 - RBC count NOS`).

Codes retrieved from: https://www.medrxiv.org/content/medrxiv/suppl/2020/05/19/2020.05.14.20101626.DC1/2020.05.14.20101626-1.pdf
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `60.7% - 68.1%` suggests that this code set is likely well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2023-09-18 | EMIS | 2463856 | 1494757 (60.7%) | 1494900 (60.7%) | 
| 2023-09-18 | TPP | 200590 | 136506 (68.1%) | 136513 (68.1%) | 
| 2023-09-18 | Vision | 332095 | 208929 (62.9%) | 208946 (62.9%) | 


LINK: [https://github.com/rw251/.../tests/red-blood-cells/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/red-blood-cells/1)

### Platelets

This code set only includes codes that are accompanied by a value (e.g. `42PZ. - Platelet count NOS`).

Codes retrieved from: https://www.medrxiv.org/content/medrxiv/suppl/2020/05/19/2020.05.14.20101626.DC1/2020.05.14.20101626-1.pdf
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `%60.7 - 68%` suggests that this code set is likely well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2023-09-19 | EMIS | 2466262 | 1495899 (60.7%) | 1496040 (60.7%) | 
| 2023-09-19 | TPP | 200680 | 136474 (68%) | 136481 (68%) | 
| 2023-09-19 | Vision | 332105 | 205855 (62%) | 205868 (62%) | 
LINK: [https://github.com/rw251/.../tests/platelets/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/platelets/1)

### Haematocrit

A patient's haematocrit percentage as recorded via clinical code and value. This code set only includes codes that are accompanied by a value (`XE2Zq - Haematocrit - PCV level`). It does not include codes that indicate a patient's haematocrit (`4253 - Haematocrit - PCV - high`) without giving the actual value.

Haematocrit codes were retrieved from https://www.medrxiv.org/content/medrxiv/suppl/2020/05/19/2020.05.14.20101626.DC1/2020.05.14.20101626-1.pdf.

**NB: This code set is intended to only indicate a patient's haematocrit percentage**
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `57.2% - 65.6%` suggests that this code set is likely well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2023-03-22 | EMIS | 2444244 | 1455735 (59.6%) | 1457398 (59.6%) | 
| 2023-03-22 | TPP | 199056 | 130631 (65.6%) | 137852 (69.3%) | 
| 2023-03-22 | Vision | 328968 | 188030 (57.2%) | 188084 (57.2%) | 
LINK: [https://github.com/rw251/.../tests/haematocrit/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/haematocrit/1)

### Mean corpuscular volume

This code set only includes codes that are accompanied by a value (e.g. `42A..11 - Mean cell volume`).

Codes retrieved from: https://www.medrxiv.org/content/medrxiv/suppl/2020/05/19/2020.05.14.20101626.DC1/2020.05.14.20101626-1.pdf
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `60.65 - 68%` suggests that this code set is likely well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2023-09-20 | EMIS | 2466262 | 1493789 (60.6%) | 1493877 (60.6%) | 
| 2023-09-20 | TPP | 200680 | 136466 (68%) | 136468 (68%) | 
| 2023-09-20 | Vision | 332105 | 205565 (61.9%) | 205584 (61.9%) | 

LINK: [https://github.com/rw251/.../tests/mean-corpuscular-volume/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/mean-corpuscular-volume/1)

### Mean corpuscular haemoglobin

This code set only includes codes that are accompanied by a value (e.g. `428..00 - Mean corpusc. haemoglobin(MCH)`).

Codes retrieved from: https://www.medrxiv.org/content/medrxiv/suppl/2020/05/19/2020.05.14.20101626.DC1/2020.05.14.20101626-1.pdf
#### Prevalence log


 update:

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `%59.64 - 62.10%` suggests that this code set is likely well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-03-29 | EMIS            | 2659647    | 1586204 (59.64%) |  1586204 (59.64%) |
| 2022-03-29 | TPP             | 212621     |  132039 (62.10%) |   132039 (62.10%) |
| 2022-03-29 | Vision          | 341774     |  211983 (62.02%) |   211983 (62.02%) |

LINK: [https://github.com/rw251/.../tests/mean-corpuscular-haemoglobin/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/mean-corpuscular-haemoglobin/1)

### Systolic Blood pressure

Any indication that systolic blood pressure has been recorded for a patient. This code set only includes codes that are accompanied by a value (`2469. - O/E - Systolic BP reading`).

Blood pressure codes retrieved from [GetSet](https://getset.ga) and metadata available in this directory.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `64.46% - 67.00%` suggests that this code set is likely well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2021-10-13 | EMIS            | 26929848   | 1741342 (66.21%) |  1741342 (66.21%) |
| 2021-10-13 | TPP             | 211812     |  137571 (64.95%) |   137571 (64.95%) |
| 2021-10-13 | Vision          | 338205     |  208971 (61.79%) |   208971 (61.79%) |
LINK: [https://github.com/rw251/.../tests/systolic-blood-pressure/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/systolic-blood-pressure/1)

### Diastolic Blood pressure

Any diastolic blood pressure measurements, with values, that have been recorded for a patient.

Blood pressure codes retrieved from [GetSet](https://getset.ga) and metadata available in this directory.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `64.46% - 67.00%` suggests that this code set is likely well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2021-10-13 | EMIS            | 26929848   | 1741082 (66.21%) |  1741077 (66.21%) |
| 2021-10-13 | TPP             | 211812     |  137567 (64.95%) |   137567 (64.95%) |
| 2021-10-13 | Vision          | 338205     |  208958 (61.79%) |   208958 (61.79%) |
LINK: [https://github.com/rw251/.../tests/diastolic-blood-pressure/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/diastolic-blood-pressure/1)

### Urine blood test

This code set includes codes that indicate the result of blood in urine test. Posiive and negative results are included. When using this code set, your script will need to use a case_when statement, using the individual codes to classify which results are positive and which are negative.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `2.99% - 14.79%` suggests underreporting from Vision practices.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-05-19 | EMIS            | 2662570    | 393799 (14.79%)  |  383716 (14.41%)  |
| 2022-05-19 | TPP             | 212696     |  26798 (12.60%)  |   26763 (12.58%)  |
| 2022-05-19 | Vision          | 342344     |   10231 (2.99%)  |     9915 (2.90%)  |

| 2023-09-20 | EMIS | 2466262 | 37760 (1.53%) | 37858 (1.54%) | 
| 2023-09-20 | TPP | 200680 | 29414 (14.7%) | 29424 (14.7%) | 
| 2023-09-20 | Vision | 332105 | 5714 (1.72%) | 5723 (1.72%) | 
LINK: [https://github.com/rw251/.../tests/urine-blood/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/urine-blood/1)

### Urine protein

This code set includes codes that indicate the result of a urine protein test. When using this code set, your script will need to use a case_when statement, using the individual codes to classify which results are positive and which are negative.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `18.64% - 23.58%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-05-19 | EMIS            | 2662570    |  627903 (23.58%) |  627903 (23.58%)  |
| 2022-05-19 | TPP             | 212696     |   39650 (18.64%) |   39650 (18.64%)  |
| 2022-05-19 | Vision          | 342344     |   72435 (21.16%) |   72435 (21.16%)  |

LINK: [https://github.com/rw251/.../tests/urine-protein/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/urine-protein/1)

### Urine ketones test

This code set includes codes that indicate the result of a urine ketones test. When using this code set, your script will need to use a case_when statement, using the individual codes to classify which results are positive and which are negative.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.83% - 10.03%%` suggests that this code set may be underreporting for Vision practices.


update

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-05-19 | EMIS            | 2662570    |  208889 (7.85%)  |  208889 (7.85%)   |
| 2022-05-19 | TPP             | 212696     |   21335 (10.03%) |   21335 (10.03%)  |
| 2022-05-19 | Vision          | 342344     |    2828 (0.83%)  |    2828 (0.83%)   |


LINK: [https://github.com/rw251/.../tests/urine-ketones/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/urine-ketones/1)

### Urine glucose test

This code set includes codes that indicate the result of a urine glucose test. When using this code set, your script will need to use a case_when statement, using the individual codes to classify which results are positive and which are negative.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `1.71% - 22.9%` suggests that this code set is missing codes.



| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2023-09-20 | EMIS | 2466262 | 42174 (1.71%) | 42265 (1.71%) | 
| 2023-09-20 | TPP | 200680 | 45942 (22.9%) | 45953 (22.9%) | 
| 2023-09-20 | Vision | 332105 | 6499 (1.96%) | 6498 (1.96%) | 

LINK: [https://github.com/rw251/.../tests/urine-glucose/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/tests/urine-glucose/1)

### Smoking status current

Any code suggestive that a patient is a current smoker.

LINK: [https://github.com/rw251/.../patient/smoking-status-current/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/smoking-status-current/1)

### Smoking status currently not

Any code suggestive that a patient is currently a non-smoker. This is different to the "never smoked" code set.

LINK: [https://github.com/rw251/.../patient/smoking-status-currently-not/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/smoking-status-currently-not/1)

### Smoking status ex

Any code suggestive that a patient is an ex-smoker.

LINK: [https://github.com/rw251/.../patient/smoking-status-ex/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/smoking-status-ex/1)


LINK: [https://github.com/rw251/.../patient/smoking-status-ex-trivial/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/smoking-status-ex-trivial/1)

### Smoking status never

Any code suggestive that a patient has never smoked. This is different to the "currently not" code set.

LINK: [https://github.com/rw251/.../patient/smoking-status-never/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/smoking-status-never/1)


LINK: [https://github.com/rw251/.../patient/smoking-status-passive/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/smoking-status-passive/1)


LINK: [https://github.com/rw251/.../patient/smoking-status-trivial/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/smoking-status-trivial/1)

### Body Mass Index (BMI)

A patient's BMI as recorded via clinical code and value. This code set only includes codes that are accompanied by a value (`22K.. - Body Mass Index`). It does not include codes that indicate a patient's BMI (`22K6. - Body mass index less than 20`) without giving the actual value.

**NB: This code set is intended to indicate a patient's BMI. If you need to know whether a BMI was recorded then please use v1 of the code set.**
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `63.96% - 79.69%` suggests that this code set is perhaps not well defined. However, as EMIS (80% of practices) and TPP (10% of practices) are close, it could simply be down to Vision automatically recording BMIs and therefore increasing the prevalence there.

**UPDATE** By looking at the prevalence of patients with a BMI code that also has a non-zero value the range becomes `62.48% - 64.93%` which suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2021-05-07 | EMIS            | 2605681    | 1709250 (65.60%) |  1709224 (65.60%) |
| 2021-05-07 | TPP             | 210817     |  134841 (63.96%) |   134835 (63.96%) |
| 2021-05-07 | Vision          | 334632     |  266612 (79.67%) |   266612 (79.67%) |
| 2021-05-11 | EMIS            | 2606497    | 1692442 (64.93%) |  1692422 (64.93%) |
| 2021-05-11 | TPP             | 210810     |  134652 (63.87%) |   134646 (63.87%) |
| 2021-05-11 | Vision          | 334784     |  209175 (62.48%) |   209175 (62.48%) |

LINK: [https://github.com/rw251/.../patient/bmi/2](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/bmi/2)
# Clinical code sets

All code sets required for this analysis are available here: [https://github.com/rw251/.../050 - Palin/clinical-code-sets.csv](https://github.com/rw251/gm-idcr/tree/master/projects/050%20-%20Palin/clinical-code-sets.csv). Individual lists for each concept can also be found by using the links above.