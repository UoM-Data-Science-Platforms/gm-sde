_This file is autogenerated. Please do not edit._

# Temporal trends in frequency of mental illness diagnoses and self-harm episodes recorded in primary care in children, adolescents and young adults during the COVID-19 pandemic: Time series analysis of electronic healthcare records patients in the Greater Manchester Care Record (GMCR)

## Summary

Mental illness is one of the leading causes of ill-health in the UK. As such, child and adolescent psychological health is now recognised as being a major public health priority, which has led to a greater understanding of these conditions and how it affects individuals.

The COVID-19 pandemic has had a major impact on the mental health of the population and there is a need to identify gaps of/access to health care services. There are concerns that the pandemic could widen pre-existing inequalities, and also around how children and adolescents have been affected by school closures and other opportunities to interact socially with their peers.  Differences in how lockdown has impacted upon students and young adults is likely to differ with many experiencing difficulties in trying to keep up with schoolwork at home. In the early phase of the pandemic, the public were also asked to avoid attending health facilities, including general practices, to help control the virus.  This might have led to fewer people seeing their GPs and other clinicians even if they were experiencing mental health difficulties.

We aim to use GMCR data to provide information on the numbers of children, adolescents and young adults seeking help for mental health problems during the pandemic and how these differ by age, gender, ethnicity, and locality, and how youngsters living in deprived places may differ from those in more affluent areas. It is hoped this will help us to better understand issues of concern in healthcare services and which groups of people may need more help.

## Table of contents

- [Introduction](#introduction)
- [Methodology](#methodology)
- [Reusable queries](#reusable-queries)
- [Clinical code sets](#clinical-code-sets)

## Introduction

The aim of this document is to provide full transparency for all parts of the data extraction process.
This includes:

- The methodology around how the data extraction process is managed and quality is maintained.
- A full list of all queries used in the extraction, and their associated objectives and assumptions.
- A full list of all clinical codes used for the extraction.

## Methodology

After each proposal is approved, a Research Data Engineer (RDE) works closely with the research team to establish precisely what data they require and in what format.
The RDE has access to the entire de-identified database and so builds up an expertise as to which projects are feasible and how best to extract the relevant data.
The RDE has access to a library of resusable SQL queries for common tasks, and sets of clinical codes for different phenotypes, built up from previous studies.
Prior to data extraction, the code is checked and signed off by another RDE.

## Reusable queries
  
This project required the following reusable queries:

- Create counting tables for each medications based on GPMedications table - RQ051
- Create counting tables for each conditions based on GPEvents table - RQ051
- GET practice and ccg for each patient
- CCG lookup table
- Year of birth
- Index Multiple Deprivation
- Sex

Further details for each query can be found below.

### Create counting tables for each medications based on GPMedications table - RQ051
To build the counting tables for each mental medications for RQ051. This reduces duplication of code in the template scripts.

_Input_
```
Assumes there exists one temp table as follows:
 #GPMedications (FK_Patient_Link_ID, MedicationDate, FK_Reference_Coding_ID, FK_Reference_SnomedCT_ID)
```

_Output_
```
Temp tables as follows:
 #First{param:medicationname}Counts
```
_File_: `query-build-rq051-gp-medications.sql`

_Link_: [https://github.com/rw251/.../query-build-rq051-gp-medications.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-build-rq051-gp-medications.sql)

---
### Create counting tables for each conditions based on GPEvents table - RQ051
To build the counting tables for each mental conditions for RQ051. This reduces duplication of code in the template scripts.

_Input_
```
Assumes there exists one temp table as follows:
 #GPEvents (FK_Patient_Link_ID, EventDate, FK_Reference_Coding_ID, FK_Reference_SnomedCT_ID)
```

_Output_
```
Temp tables as follows:
 #First{param:conditionname}FullLookback
 #First{param:conditionname}2019Lookback
 #First{param:conditionname}Counts
```
_File_: `query-build-rq051-gp-events.sql`

_Link_: [https://github.com/rw251/.../query-build-rq051-gp-events.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-build-rq051-gp-events.sql)

---
### GET practice and ccg for each patient
For each patient to get the practice id that they are registered to, and the CCG name that the practice belongs to.

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
Two temp tables as follows:
 #PatientPractice (FK_Patient_Link_ID, GPPracticeCode)
	- FK_Patient_Link_ID - unique patient id
	- GPPracticeCode - the nationally recognised practice id for the patient
 #PatientPracticeAndCCG (FK_Patient_Link_ID, GPPracticeCode, CCG)
	- FK_Patient_Link_ID - unique patient id
	- GPPracticeCode - the nationally recognised practice id for the patient
	- CCG - the name of the patient's CCG
```
_File_: `query-patient-practice-and-ccg.sql`

_Link_: [https://github.com/rw251/.../query-patient-practice-and-ccg.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-practice-and-ccg.sql)

---
### CCG lookup table
To provide lookup table for CCG names. The GMCR provides the CCG id (e.g. '00T', '01G') but not the CCG name. This table can be used in other queries when the output is required to be a ccg name rather than an id.

_Input_
```
No pre-requisites
```

_Output_
```
A temp table as follows:
 #CCGLookup (CcgId, CcgName)
 	- CcgId - Nationally recognised ccg id
	- CcgName - Bolton, Stockport etc..
```
_File_: `query-ccg-lookup.sql`

_Link_: [https://github.com/rw251/.../query-ccg-lookup.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-ccg-lookup.sql)

---
### Year of birth
To get the year of birth for each patient.

_Assumptions_

- Patient data is obtained from multiple sources. Where patients have multiple YOBs we determine the YOB as follows:
- If the patients has a YOB in their primary care data feed we use that as most likely to be up to date
- If every YOB for a patient is the same, then we use that
- If there is a single most recently updated YOB in the database then we use that
- Otherwise we take the highest YOB for the patient that is not in the future

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
A temp table as follows:
 #PatientYearOfBirth (FK_Patient_Link_ID, YearOfBirth)
 	- FK_Patient_Link_ID - unique patient id
	- YearOfBirth - INT
```
_File_: `query-patient-year-of-birth.sql`

_Link_: [https://github.com/rw251/.../query-patient-year-of-birth.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-year-of-birth.sql)

---
### Index Multiple Deprivation
To get the 2019 Index of Multiple Deprivation (IMD) decile for each patient.

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
A temp table as follows:
 #PatientIMDDecile (FK_Patient_Link_ID, IMD2019Decile1IsMostDeprived10IsLeastDeprived)
 	- FK_Patient_Link_ID - unique patient id
	- IMD2019Decile1IsMostDeprived10IsLeastDeprived - number 1 to 10 inclusive
```
_File_: `query-patient-imd.sql`

_Link_: [https://github.com/rw251/.../query-patient-imd.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-imd.sql)

---
### Sex
To get the Sex for each patient.

_Assumptions_

- Patient data is obtained from multiple sources. Where patients have multiple sexes we determine the sex as follows:
- If the patients has a sex in their primary care data feed we use that as most likely to be up to date
- If every sex for a patient is the same, then we use that
- If there is a single most recently updated sex in the database then we use that
- Otherwise the patient's sex is considered unknown

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
A temp table as follows:
 #PatientSex (FK_Patient_Link_ID, Sex)
 	- FK_Patient_Link_ID - unique patient id
	- Sex - M/F
```
_File_: `query-patient-sex.sql`

_Link_: [https://github.com/rw251/.../query-patient-sex.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-sex.sql)
## Clinical code sets

This project required the following clinical code sets:

- anxiety v1
- depression v1
- schizophrenia-psychosis v1
- bipolar v1
- eating-disorders v1
- selfharm-episodes v1
- attention-deficit-hyperactivity-disorder v1
- autism-spectrum-disorder v1
- monoamine-oxidase-inhibitor v1
- norepinephrine-reuptake-inhibitors v1
- serotonin-antagonist-reuptake-inhibitors v1
- serotonin-modulator-stimulator v1
- serotonin-norepinephrine-reuptake-inhibitors v1
- selective-serotonin-reuptake-inhibitors v1
- tricyclic-antidepressants v1
- tetracyclic v1
- other-antidepressants v1
- barbituates v1
- benzodiazepines v2
- nonbenzodiazepine-benzodiazepine-receptor-agonist v1
- other-anxiolytics-and-hypnotics v1
- antipsychotics v2
- anticonvulsants v1
- lithium v1
- off-label-mood-stabilisers v1
- attention-deficit-hyperactivity-disorder-medications v1

Further details for each code set can be found below.

### Anxiety

Any code indicating a diagnosis of anxiety or other somatoform disorder.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set.

The discrepancy between the patients counted when using the IDs vs using the clinical codes is due to these being new codes which haven't all filtered through to the main Graphnet dictionary. The prevalence range `18.23% - 18.77%` suggests that this code set is well defined.

| Date        | Practice system | Population | Patients from ID | Patient from code |
| ----------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-05-16  | EMIS            | 2662570    |  499713 (18.77%) |   502416 (18.87%) |
| 2022-05-16  | TPP             | 212696     |   38757 (18.22%) |    38769 (18.23%) |
| 2022-05-16  | Vision          | 342344     |   65130 (19.02%) |    64271 (18.77%)) |

LINK: [https://github.com/rw251/.../conditions/anxiety/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/anxiety/1)

### Depression

Code set for patients with a diagnosis of depression.

Developed from www.opencodelists.org
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, 
we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set.
Prevalence range: 21.09% - 22.83%

|    Date    | Practice system |  Population | Patients from ID | Patient from code |
| ---------- | ----------------| ------------| ---------------- | ----------------- |
| 2022-05-12 |	EMIS	       |  2662570    |	553650 (20.79%) | 560060 (21.03%)   |
| 2022-05-12 |	TPP	           |   212696    |   45884 (21.57%) |  45912 (21.59%)   |
| 2022-05-12 |	Vision	       |   342344    |   75709 (22.11%) |  73277 (21.40%)   |
LINK: [https://github.com/rw251/.../conditions/depression/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/depression/1)

### Schizophrenia and Psychosis

Code set for patients with a diagnosis of psychosis or schizophrenia.

Developed from www.opencodelists.org
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions.
Here is a log for this code set. The prevalence range (1.10% - 1.90%)

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------- | ----------------- |
| 2021-06-16 | EMIS            | 2608685    | 46695 (1.79%)    | 46695 (1.79%)     |
| 2021-06-16 | TPP             | 210985     | 28695 (1.10%)    | 28695 (1.10%)     |
| 2021-06-16 | Vision          | 335010     | 49565 (1.90%)    | 49565 (1.90%)     |

LINK: [https://github.com/rw251/.../conditions/schizophrenia-psychosis/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/schizophrenia-psychosis/1)

### Bipolar affective disorder

Code set for patients with a diagnosis of bipolar.

Developed from www.opencodelists.org
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. Prevalence range: 0.28% - 0.54%

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------- | ----------------- |
| 2021-06-30 | EMIS            | 2608685    | 14087 (0.54%)    | 14087 (0.54%)     |
| 2021-06-30 | TPP             | 210985     | 591 (0.28%)      | 591 (0.28%)       |
| 2021-06-30 | Vision          | 335010     | 1608 (0.48%)     | 1608 (0.48%)      |

LINK: [https://github.com/rw251/.../conditions/bipolar/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/bipolar/1)

### Eating disorders

Any code indicating a diagnosis of anorexia or bulimia or similar eating disorders.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set.

The discrepancy between the patients counted when using the IDs vs using the clinical codes is due to these being new codes which haven't all filtered through to the main Graphnet dictionary. The prevalence range `0.42% - 0.84%` suggests that this code set is well defined.

| Date        | Practice system | Population | Patients from ID | Patient from code |
| ----------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-05-06  | EMIS            | 2662112    |    22407 (0.84%) |     22407 (0.84%) |
| 2022-05-06  | TPP             | 212726     |      885 (0.42%) |       885 (0.42%) |
| 2022-05-06  | Vision          | 342310     |     1999 (0.58%) |      1935 (0.57%) |

LINK: [https://github.com/rw251/.../conditions/eating-disorders/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/eating-disorders/1)

### Self-harm Episodes

Defined as any episode of self-harm (except accidental) or attempted suicide

Readv2 code set supplied by the PI for RQ-029(Steeg) 

CTV3 and SNOMED code sets created using the Reference_Coding table in the GMCR, based on the Readv2 code set.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set.

The discrepancy between the patients counted when using the IDs vs using the clinical codes is due to these being new codes which haven't all filtered through to the main Graphnet dictionary.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2021-04-14 | EMIS            | 2603707    |   102353 (3.97%) |     95004 (3.65%) |
| 2021-04-14 | TPP             | 210613     |     7591 (3.61%) |      7257 (3.45%) |
| 2021-04-14 | Vision          | 333786     |    12661 (3.79%) |     11975 (3.59%) |
LINK: [https://github.com/rw251/.../patient/selfharm-episodes/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/patient/selfharm-episodes/1)

### Attention deficit hyperactivity disorder 

This code set was created from getset.ga.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.70 - 0.78%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-27 | EMIS            |    2449912 |    17633 (0.71%) |     17132 (0.70%) |
| 2022-09-27 | TPP             |     198140 |     1474 (0.74%) |       1555(0.78%) |
| 2022-09-27 | Vision          |     325784 |     2966 (0.91%) |       2457(0.75%) |
LINK: [https://github.com/rw251/.../conditions/attention-deficit-hyperactivity-disorder/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/attention-deficit-hyperactivity-disorder/1)

### Autism spectrum disorder

This code set was created from getset.ga.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.80 - 0.89%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-27 | EMIS            |    2449912 |    21708 (0.88%) |     21831 (0.89%) |
| 2022-09-27 | TPP             |     198140 |     1575 (0.79%) |      1727 (0.87%) |
| 2022-09-27 | Vision          |     325784 |     2769 (0.84%) |      2614 (0.80%) |
LINK: [https://github.com/rw251/.../conditions/autism-spectrum-disorder/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/autism-spectrum-disorder/1)

### Monoamine Axidase Inhibitors (MAOI) 

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Iproniazid
-- Isocarboxazid
-- Moclobemide
-- Phenelzine sulfate
-- Selegiline hydrochloride
-- Tranylcypromine sulfate
-- Trifluoperazine Hydrochloride/Tranylcypromine Sulphate

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.03 - 0.05%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-05-09 | EMIS            |  2450268   |      941 (0.04%) |       941 (0.04%) |
| 2022-05-09 | TPP             |  198118    |      102 (0.05%) |       104 (0.05%) |
| 2022-05-09 | Vision          |  325609    |      107 (0.03%) |       107 (0.03%) |
LINK: [https://github.com/rw251/.../medications/monoamine-oxidase-inhibitor/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/monoamine-oxidase-inhibitor/1)

### Norepinephrine Reuptake Inhibitors (NRI)  

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Atomoxetine hydrochloride
-- Reboxetine
-- Viloxazine Hydrochloride

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.14 - 0.17%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-05 | EMIS            |    2450268 |     3431 (0.14%) |      3435 (0.14%) |
| 2022-09-05 | TPP             |     198118 |      333 (0.17%) |       350 (0.17%) |
| 2022-09-05 | Vision          |     325609 |      534 (0.16%) |       534 (0.16%) |
LINK: [https://github.com/rw251/.../medications/norepinephrine-reuptake-inhibitors/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/norepinephrine-reuptake-inhibitors/1)

### Serotonin Antagonist and Reuptake Inhibitors (SARI)  

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Nefazodone
-- Nefazodone hydrochloride
-- Trazodone
-- Trazodone hydrochloride

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.6 - 1.2%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-06 | EMIS            |    2450268 |     18764 (0.8%) |      18811 (0.8%) |
| 2022-09-06 | TPP             |     198118 |      2241 (1.1%) |       2407 (1.2%) |
| 2022-09-06 | Vision          |     325609 |      2032 (0.6%) |       2032 (0.6%) |
LINK: [https://github.com/rw251/.../medications/serotonin-antagonist-reuptake-inhibitors/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/serotonin-antagonist-reuptake-inhibitors/1)

### Serotonin Modulator and Stimulator (SMS)  

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Vortioxetine hydrobromide

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.001 - 0.003%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-06 | EMIS            |    2447974 |      33 (0.001%) |       33 (0.001%) |
| 2022-09-06 | TPP             |     198058 |       6 (0.003%) |        6 (0.001%) |
| 2022-09-06 | Vision          |     325464 |       4 (0.001%) |        4 (0.001%) |
LINK: [https://github.com/rw251/.../medications/serotonin-modulator-stimulator/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/serotonin-modulator-stimulator/1)

### Serotonin and Norepinephrine Reuptake Inhibitors (SNRI) 

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Desvenlafaxine
-- Duloxetine
-- Duloxetine hydrochloride
-- Venlafaxine hydrochloride

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `3.57 - 4.35%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-06 | EMIS            |    2447974 |    87145 (3.56%) |     87283 (3.57%) |
| 2022-09-06 | TPP             |     198058 |     7861 (3.97%) |      8618 (4.35%) |
| 2022-09-06 | Vision          |     325464 |    11698 (3.59%) |     11705 (3.59%) |
LINK: [https://github.com/rw251/.../medications/serotonin-norepinephrine-reuptake-inhibitors/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/serotonin-norepinephrine-reuptake-inhibitors/1)

### Selective Serotonin Reuptake Inhibitors (SSRI) 

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Citalopram hydrobromide
-- Citalopram hydrochloride
-- Escitalopram oxalate
-- Fluoxetine
-- Fluoxetine hydrochloride
-- Fluvoxamine
-- Fluvoxamine maleate
-- Paroxetine hydrochloride
-- Sertraline
-- Sertraline hydrochloride

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `21.1 - 26.6%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-06 | EMIS            |    2448237 |   516631 (21.1%) |    517274 (21.1%) |
| 2022-09-06 | TPP             |     198144 |    50341 (25.4%) |     52696 (26.6%) |
| 2022-09-06 | Vision          |     325732 |    69233 (21.2%) |     69295 (21.3%) |
LINK: [https://github.com/rw251/.../medications/selective-serotonin-reuptake-inhibitors/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/selective-serotonin-reuptake-inhibitors/1)

### Tricyclic (TCA)  

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Amitriptyline
-- Amitriptyline hydrochloride
-- Amitriptyline hydrochloride/ Perphenazine
-- Butriptyline Hydrochloride
-- Clomipramine
-- Clomipramine hydrochloride
-- Desipramine
-- Dosulepin
-- Dosulepin hydrochloride
-- Doxepin
-- Doxepin hydrochloride
-- Imipramine
-- Imipramine hydrochloride
-- Iprindole
-- Lofepramine
-- Lofepramine hydrochloride
-- Nortriptyline
-- Nortriptyline hydrochloride
-- Protriptyline
-- Protriptyline hydrochloride
-- Trimipramine
-- Trimipramine maleate

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `14.1 - 17.8%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-06 | EMIS            |    2448237 |   344328 (14.1%) |    344860 (14.1%) |
| 2022-09-06 | TPP             |     198144 |    34122 (17.2%) |     35179 (17.8%) |
| 2022-09-06 | Vision          |     325732 |    44883 (13.8%) |     45430 (13.9%) |
LINK: [https://github.com/rw251/.../medications/tricyclic-antidepressants/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/tricyclic-antidepressants/1)

### Tetracyclic (TeCA)  

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Amoxapine
-- Maprotiline
-- Maprotiline hydrochloride
-- Mianserin
-- Mianserin hydrochloride
-- Mirtazapine

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `5.4 - 8.3%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-06 | EMIS            |    2448237 |    155723 (6.4%) |     156219 (6.4%) |
| 2022-09-06 | TPP             |     198144 |     15266 (7.7%) |      16477 (8.3%) |
| 2022-09-06 | Vision          |     325732 |     17614 (5.4%) |      17687 (5.4%) |
LINK: [https://github.com/rw251/.../medications/tetracyclic/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/tetracyclic/1)

### Other antidepressants 

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Agomelatine
-- Ascorbic Acid/Tryptophan/Pyridoxine Hydrochloride
-- Bupropion hydrochloride
-- Bupropion hydrochloride/Naltrexone hydrochloride
-- Esketamine hydrochloride
-- Ketamine
-- Ketamine hydrochloride
-- Oxitriptan
-- Tryptophan

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `1.3 - 1.9%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-08 | EMIS            |    2448237 |     31860 (1.3%) |      31877 (1.3%) |
| 2022-09-08 | TPP             |     198144 |      3840 (1.9%) |       3894 (1.9%) |
| 2022-09-08 | Vision          |     325732 |      4692 (1.4%) |       4693 (1.4%) |
LINK: [https://github.com/rw251/.../medications/other-antidepressants/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/other-antidepressants/1)

### Barbituates

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Amobarbital
-- Amobarbital/Secobarbital
-- Barbital
-- Butobarbital
-- Cyclobarbital
-- Methylphenobarbital
-- Pentobarbital
-- Phenobarbital
-- Primidone
-- Secobarbital
-- Thiopental

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.09 - 0.15%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-08 | EMIS            |    2448237 |     2360 (0.09%) |      2365 (0.09%) |
| 2022-09-08 | TPP             |     198144 |      270 (0.13%) |       304 (0.15%) |
| 2022-09-08 | Vision          |     325732 |      314 (0.09%) |       314 (0.09%) |
LINK: [https://github.com/rw251/.../medications/barbituates/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/barbituates/1)

### Benzodiazepine 

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Alprazolam
-- Bromazepam
-- Chlordiazepoxide
-- Clobazam
-- Clonazepam
-- Clorazepate
-- Diazepam
-- Flunitrazepam
-- Flurazepam
-- Ketazolam
-- Loprazolam
-- Lorazepam
-- Lormetazepam
-- Medazepam
-- Midazolam
-- Nitrazepam
-- Oxazepam
-- Prazepam
-- Temazepam
-- Triazolam

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `10.4 - 11.7%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-15 | EMIS            |    2448321 |   255338 (10.4%) |    255511 (10.4%) |
| 2022-09-15 | TPP             |     198113 |    23190 (11.7%) |     23654 (11.9%) |
| 2022-09-15 | Vision          |     325847 |    36301 (11.1%) |     36313 (11.1%) |
LINK: [https://github.com/rw251/.../medications/benzodiazepines/2](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/benzodiazepines/2)

### Non-benzodiazepine benzodiazepine receptor agonist (NBBRA) 

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Zaleplon
-- Zolpidem
-- Zopiclone

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `7.2 - 9.4%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-08 | EMIS            |    2448237 |    205034 (8.4%) |     205190 (8.4%) |
| 2022-09-08 | TPP             |     198144 |     18205 (9.2%) |      18552 (9.4%) |
| 2022-09-08 | Vision          |     325732 |     23532 (7.2%) |      23547 (7.2%) |
LINK: [https://github.com/rw251/.../medications/nonbenzodiazepine-benzodiazepine-receptor-agonist/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/nonbenzodiazepine-benzodiazepine-receptor-agonist/1)

### Other anxiolytics and hypnotics 

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Alimemazine
-- Buspirone
-- Chloral
-- Chlormezanone
-- Clomethiazole
-- Dichloralphenazone
-- Diphenhydramine
-- Hydroxyzine
-- Melatonin
-- Meprobamate
-- Methyprylone
-- Potassium bromide
-- Potassium bromide/chloral
-- Promethazine
-- Sodium hydroxybutyrate
-- Sodium oxybate
-- Triclofos

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `5.3 - 7.0%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-08 | EMIS            |    2448237 |    136593 (5.6%) |     136694 (5.6%) |
| 2022-09-08 | TPP             |     198144 |     10289 (5.2%) |      10575 (5.3%) |
| 2022-09-08 | Vision          |     325732 |     22886 (7.0%) |      22896 (7.0%) |
LINK: [https://github.com/rw251/.../medications/other-anxiolytics-and-hypnotics/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/other-anxiolytics-and-hypnotics/1)

### Antipsychotics 

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Amisulpride
-- Amitriptyline hydrochloride/Perphenazine
-- Aripiprazole
-- Asenapine maleate
-- Benperidol
-- Cariprazine hydrochloride
-- Chlorpromazine
-- Chlorpromazine embonate
-- Chlorpromazine hydrochloride
-- Chlorprothixene
-- Clozapine
-- Droperidol
-- Flupentixol
-- Flupentixol decanoate
-- Flupentixol dihydrochloride
-- Fluphenazine
-- Fluphenazine decanoate
-- Fluphenazine Enantate
-- Fluphenazine hydrochloride
-- Fluphenazine hydrochloride/Nortriptyline hydrochloride
-- Fluspirilene
-- Haloperidol
-- Haloperidol decanoate
-- Isopropamide Iodide/Trifluoperazine Hydrochloride
-- Levomepromazine hydrochloride
-- Levomepromazine maleate
-- Loxapine
-- Loxapine succinate
-- Lurasidone hydrochloride
-- Melperone hydrochloride
-- Nortriptyline hydrochloride/Fluphenazine hydrochloride
-- Olanzapine
-- Olanzapine embonate monohydrate
-- Oxypertine
-- Paliperidone
-- Paliperidone palmitate
-- Pericyazine
-- Perphenazine
-- Pimozide
-- Pipotiazine palmitate
-- Prochlorperazine
-- Prochlorperazine maleate
-- Prochlorperazine mesilate
-- Promazine
-- Promazine hydrochloride
-- Quetiapine
-- Quetiapine fumarate
-- Remoxipride Hydrochloride Monohydrate
-- Risperidone
-- Sertindole
-- Sulpiride
-- Thioridazine
-- Thioridazine hydrochloride
-- Trifluoperazine
-- Trifluoperazine hydrochloride
-- Trifluoperazine Hydrochloride/Tranylcypromine Sulphate
-- Trifluperidol
-- Ziprasidone hydrochloride
-- Zotepine
-- Zuclopenthixol
-- Zuclopenthixol acetate
-- Zuclopenthixol decanoate
-- Zuclopenthixol dihydrochloride


#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `12.9 - 15.7%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-14 | EMIS            |    2448321 |   316670 (12.9%) |    316920 (12.9%) |
| 2022-09-14 | TPP             |     198113 |    31106 (15.7%) |     31971 (16.1%) |
| 2022-09-14 | Vision          |     325847 |    45079 (13.8%) |     45098 (13.8%) |
LINK: [https://github.com/rw251/.../medications/antipsychotics/2](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/antipsychotics/2)

### Antoconvusants

This code set was created from getset.ga, using the following list from the PI of RQ051:
    Carbamazepine
    Lamotrigine
    Sodium valproate
    Valproate semisodium
    Valproic acid

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range from the code is `1.9% - 2.4%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-08 | EMIS            |    2448237 |     46918 (1.9%) |      47012 (1.9%) |
| 2022-09-08 | TPP             |     198144 |      4194 (2.1%) |       4817 (2.4%) |
| 2022-09-08 | Vision          |     325732 |      6704 (2.1%) |       6707 (2.1%) |


LINK: [https://github.com/rw251/.../medications/anticonvulsants/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/anticonvulsants/1)

### Lithium
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.11% - 0.15%` suggests the code set is well defined across systems, however the prevalence seems low and may need checking.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-15 | EMIS            | 2448321    |   3765 (0.15%)   |   	3783 (0.15%)   |
| 2022-09-15 | TPP             | 198113     |    211 (0.11%)   |     259 (0.13%)   |
| 2022-09-15 | Vision          | 325847     |    460 (0.14%)   |   	 460 (0.14%)   |

LINK: [https://github.com/rw251/.../medications/lithium/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/lithium/1)

### Off label mood stabilisers 

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Gabapentin
-- Oxcarbazepine
-- Topiramate

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `5.9 - 6.7%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-08 | EMIS            |    2448237 |    143169 (5.8%) |     143340 (5.9%) |
| 2022-09-08 | TPP             |     198144 |     12653 (6.4%) |      13384 (6.7%) |
| 2022-09-08 | Vision          |     325732 |     21077 (6.5%) |      21084 (6.5%) |
LINK: [https://github.com/rw251/.../medications/off-label-mood-stabilisers/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/off-label-mood-stabilisers/1)

### Attention deficit hyperactivity disorder medications

This code set was created from getset.ga, using the following list from the PI of RQ051:
-- Amfetamine/Dexamfetamine
-- Amfetamine/Dexamfetamine Sulphate
-- Atomoxetine hydrochloride
-- Dexamfetamine Sulphate
-- Dexedrine
-- Dexmethylphenidate hydrochloride
-- Guanfacine hydrochloride
-- Lisdexamfetamine dimesylate
-- Methylphenidate hydrochloride
-- Modafinil
-- Pitolisant hydrochloride
-- Ritalin

#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.5 - 0.7%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2022-09-08 | EMIS            |    2448237 |     12298 (0.5%) |      12333 (0.5%) |
| 2022-09-08 | TPP             |     198144 |      1172 (0.6%) |       1340 (0.7%) |
| 2022-09-08 | Vision          |     325732 |      2229 (0.7%) |       2229 (0.7%) |
LINK: [https://github.com/rw251/.../medications/attention-deficit-hyperactivity-disorder-medications/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/attention-deficit-hyperactivity-disorder-medications/1)
# Clinical code sets

All code sets required for this analysis are available here: [https://github.com/rw251/.../051 - Webb/clinical-code-sets.csv](https://github.com/rw251/gm-idcr/tree/master/projects/051%20-%20Webb/clinical-code-sets.csv). Individual lists for each concept can also be found by using the links above.