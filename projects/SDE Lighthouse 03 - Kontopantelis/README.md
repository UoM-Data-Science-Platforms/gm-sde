_This file is autogenerated. Please do not edit._

# Understanding and addressing socio-economic inequality within the quality and safety of care and clinical outcomes for people living with dementia

## Summary

In the coming years, many more people will develop dementia (severe memory problems which affect day-to-day life). It is recommended that after diagnosis, care for people with dementia should mainly be community based, provided by the primary care team. There are recommendations for care that should be provided, ensuring it is high-quality and safe. These recommendations include an annual review, regular medication reviews, care planning and safe prescribing of medications. Few studies have looked at how recommended primary care processes and key outcomes, vary with socio-economic factors for people with dementia. Those that have, found evidence of inequalities in care and outcomes. The study's aim is to explore how post-diagnosis primary care and important outcomes for people with dementia vary with socio-economic factors and other markers of health disadvantage.

Data from the Greater Manchester Secure Data Environment (GM SDE) containing anonymised records for people with dementia, aged >18 years or older, diagnosed from 2020 onwards for comparative outcome analyses.

We will analyse how 'care processes' (including yearly reviews, carer reviews, care planning, medication prescribing) and 'outcomes' (including emergency hospital admissions, falls, fractures) vary with socio-economic factors. These factors will include the patient's socioeconomic status as measured by the Index of Multiple Deprivation (IMD, which summarises the level of deprivation of where the patients live), as well as other markers of health disadvantage including ethnicity, sex, rural/urban practice location and disabilities.

The results will evidence how care provided and important outcomes for people with dementia vary with the described socio-economic factors. Results will contribute to guidelines

## Table of contents

- [Introduction](#introduction)
- [Methodology](#methodology)
- [Reusable queries](#reusable-queries)
- [Clinical code sets](#clinical-code-sets)

## Introduction

The aim of this document is to provide full transparency for all parts of the data extraction process.
This includes:

- The methodology around how the data extraction process is managed and quality is maintained.
- A full list of all queries used in the extraction, and their associated objectives and assumptions.
- A full list of all clinical codes used for the extraction.

## Methodology

After each proposal is approved, a Research Data Engineer (RDE) works closely with the research team to establish precisely what data they require and in what format.
The RDE has access to the entire de-identified database and so builds up an expertise as to which projects are feasible and how best to extract the relevant data.
The RDE has access to a library of resusable SQL queries for common tasks, and sets of clinical codes for different phenotypes, built up from previous studies.
Prior to data extraction, the code is checked and signed off by another RDE.

## Reusable queries
  
This project required the following reusable queries:

- Patient GP encounters
- Define Cohort for LH003: patients that had a dementia diagnosis

Further details for each query can be found below.

### Patient GP encounters
To produce a table of GP encounters for a list of patients. This script uses many codes related to observations (e.g. blood pressure), symptoms, and diagnoses, to infer when GP encounters occured. This script includes face to face and telephone encounters - it will need copying and editing if you don't require both.

_Assumptions_

- multiple codes on the same day will be classed as one encounter (so max daily encounters per patient is 1)

_Input_
```
Assumes there exists a temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
A temp table as follows:
 #GPEncounters (FK_Patient_Link_ID, EncounterDate)
	- FK_Patient_Link_ID - unique patient id
	- EncounterDate - date the patient had a GP encounter
```
_File_: `query-patient-gp-encounters.sql`

_Link_: [https://github.com/rw251/.../query-patient-gp-encounters.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-patient-gp-encounters.sql)

---
### Define Cohort for LH003: patients that had a dementia diagnosis
To build the cohort of patients needed for LH003. This reduces duplication of code in the template scripts.

_Input_
```
assumes there exists one temp table as follows:
 #Patients (FK_Patient_Link_ID)
  A distinct list of FK_Patient_Link_IDs for each patient in the cohort
```

_Output_
```
Temp tables as follows:
 #Cohort
```
_File_: `query-build-lh003-cohort.sql`

_Link_: [https://github.com/rw251/.../query-build-lh003-cohort.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-build-lh003-cohort.sql)
## Clinical code sets

This project required the following clinical code sets:

- antipsychotics v1

Further details for each code set can be found below.

### Antipychotics

Code set for prescriptions of antipsychotic medication.

Developed from https://clinicalcodes.rss.mhs.man.ac.uk/medcodes/article/53/
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. 
Here is a log for this code set. The prevalence range `3.10% - 3.78%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2021-07-20 | EMIS            | 2616446    |    81113 (3.10%) |     81141 (3.10%) |
| 2021-07-20 | TPP             | 211414     |     6642 (3.14%) |      7995 (3.78%) |
| 2021-07-20 | Vision          | 336776     |    10600 (3.15%) |     10600 (3.15%) |

LINK: [https://github.com/rw251/.../medications/antipsychotics/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/medications/antipsychotics/1)
# Clinical code sets

All code sets required for this analysis are available here: [https://github.com/rw251/.../SDE Lighthouse 03 - Kontopantelis/clinical-code-sets.csv](https://github.com/rw251/gm-idcr/tree/master/projects/SDE%20Lighthouse%2003%20-%20Kontopantelis/clinical-code-sets.csv). Individual lists for each concept can also be found by using the links above.