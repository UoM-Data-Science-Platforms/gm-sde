_This file is autogenerated. Please do not edit._

# Long-term opioid utilisation patterns and associated adverse consequences in patients with chronic-non cancer pain in Greater Manchester

## Summary

The surge in opioid prescriptions in patients with chronic pain has sparked concerns about potential overdoses, misuse, and fatalities. Our prior research unearthed a link between opioid use and socioeconomic status, revealing Manchester has the highest usage of opioids among all of England's metropolitan cities. In response to these challenges, our current study investigates the intricate landscape of opioid use, aiming to understand long-term utilisation patterns and suggest strategies to prevent opioid-related harm while enhancing chronic pain care. 

Despite existing guidelines and local strategies to optimise opioid use, there is a conspicuous absence of a national consensus on safely reducing opioid dependence. Moreover, there is a lack of non-pharmacological strategies available for chronic pain management. Consequently, addressing safety concerns related to problematic opioid use, including high-dose and persistent use, as well as the combination of opioids with potentially addictive medications, stands out as a priority in optimising medicine in Greater Manchester. 

This study focuses on four key research questions:
1. How frequent is the potential problematic opioid use, such as long-term, high-dose use, combining multiple medications with high dependence tendency, in patients with chronic non-cancer pain?
2. What factors are associated with problematic opioid use? For example, patient demographics, socioeconomics, baseline comorbidities, medical history, and pharmacological and non-pharmacological treatments for pain control.
3. Whether and how frequently can long-term opioids be tapered, and what factors contribute to successful tapering?
4. How frequently did severe adverse events occur in patients using opioid use? 

We will target adults (aged 18 and above) experiencing chronic pain and receiving more than two opioid prescriptions within 90 days between 2017 and 2023. We will use the Greater Manchester Care Records data, including patient characteristics, practice data, diagnosis data, therapeutic data (medication prescriptions and non-pharmacological treatments), and referral data for hospital treatments. 

Through this investigation, we seek a profound understanding of long-term opioid use patterns in chronic pain patients in Greater Manchester. Our discoveries will illuminate variations in opioid prescribing and associated adverse consequences, particularly in problematic usage. This knowledge will guide interventions and policies to enhance access to pain management options, ultimately minimising health inequalities. Additionally, our research strives to ensure the safe use of medication, improve patients' quality of life, and reduce unnecessary healthcare resource utilisation. In totality, this study is a pivotal step towards achieving more effective and equitable pain management, all while mitigating the risks linked to opioid use.

## Table of contents

- [Introduction](#introduction)
- [Methodology](#methodology)
- [Reusable queries](#reusable-queries)
- [Clinical code sets](#clinical-code-sets)

## Introduction

The aim of this document is to provide full transparency for all parts of the data extraction process.
This includes:

- The methodology around how the data extraction process is managed and quality is maintained.
- A full list of all queries used in the extraction, and their associated objectives and assumptions.
- A full list of all clinical codes used for the extraction.

## Methodology

After each proposal is approved, a Research Data Engineer (RDE) works closely with the research team to establish precisely what data they require and in what format.
The RDE has access to the entire de-identified database and so builds up an expertise as to which projects are feasible and how best to extract the relevant data.
The RDE has access to a library of resusable SQL queries for common tasks, and sets of clinical codes for different phenotypes, built up from previous studies.
Prior to data extraction, the code is checked and signed off by another RDE.

## Reusable queries
  
This project required the following reusable queries:

- Create table of patients who were alive at the study start date

Further details for each query can be found below.

### Create table of patients who were alive at the study start date
undefined

_Input_
```
undefined
```

_Output_
```
undefined
```
_File_: `query-get-possible-patients.sql`

_Link_: [https://github.com/rw251/.../query-get-possible-patients.sql](https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-get-possible-patients.sql)
## Clinical code sets

This project required the following clinical code sets:

- chronic-pain v1
- cancer v1
- neck-problems v1
- neuropathic-pain v1
- chest-pain v1
- post-herpetic-neuralgia v1
- ankylosing-spondylitis v1
- psoriatic-arthritis v1
- fibromyalgia v1
- temporomandibular-pain v1
- phantom-limb-pain v1
- chronic-pancreatitis v1

Further details for each code set can be found below.

### Chronic Pain

SNOMED and Read codes from study team for SDE-LS-006, used in previous CPRD studies.

EMIS and CTV3 codes retrieved from reference lookup in Graphnet database.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set.

The discrepancy between the patients counted when using the IDs vs using the clinical codes is due to these being new codes which haven't all filtered through to the main Graphnet dictionary. The prevalence range `57.8% - 60.6%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2024-04-12 | EMIS | 2528955 | 1462767 (57.8%) | 1462924 (57.8%) | 
| 2024-04-12 | TPP | 201791 | 122358 (60.6%) | 121166 (60%) | 
| 2024-04-12 | Vision | 335318 | 201694 (60.2%) | 201361 (60.1%) | 
LINK: [https://github.com/rw251/.../conditions/chronic-pain/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/chronic-pain/1)

### Cancer
Readv2 codes from code sets published by in:

Zhu Y, Edwards D, Mant J, Payne RA, Kiddle S. Characteristics, service use and mortality of clusters of multimorbid patients in England: A population-based study. BMC Med [Internet]. 2020 Apr 10 [cited 2021 Apr 14];18(1):78. Available from: https://bmcmedicine.biomedcentral.com/articles/10.1186/s12916-020-01543-8

The above paper used the definition of LTCs as first determined in:

Barnett K, Mercer SW, Norbury M, Watt G, Wyke S, Guthrie B. Epidemiology of multimorbidity and implications for health care, research, and medical education: A cross-sectional study. Lancet [Internet]. 2012 Jul 7 [cited 2021 Apr 14];380(9836):37â€“43. Available from: www.thelancet.com

CTV3 and SNOMED code sets from OpenSafely.

ICD10 codes have been provided and verified by the Christie team (004). 
#### Prevalence log
By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set, as of 19th July 2021.

| Concept | Version   | System    | Patients | PatientsWithConcept | PatientsWithConceptFromCode | PercentageOfPatients | PercentageOfPatientsFromCode |
| :-----: | :-------: | :-------: | :------: | :-----------------: | :-------------------------: | :------------------: | :--------------------------: |
| cancer  | 1         | EMIS      | 2615750  | 118723              | 78901                       | 4.53877473000096     | 3.01638153493262             |
| cancer  | 1         | TPP       | 211345   | 9607	               | 7280                        | 4.5456481109087      | 3.44460479311079             |
| cancer  | 1         | Vision    | 336528   | 16642               | 11427                       | 4.94520515380592     | 3.39555698188561             |

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2024-02-22 | EMIS | 2524209 | 123626 (4.9%) | 123152 (4.88%) | 
| 2024-02-22 | TPP | 201752 | 11008 (5.46%) | 8580 (4.25%) | 
| 2024-02-22 | Vision | 335007 | 16786 (5.01%) | 16713 (4.99%) | 
LINK: [https://github.com/rw251/.../conditions/cancer/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/cancer/1)

### Neck problems

Any code indicating neck problems. SNOMED codes from: https://clinicalcodes.rss.mhs.man.ac.uk/medcodes/article/174/codelist/res174-neck-diagnoses/
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `14.4% - 16%` suggests that this code set is well defined.


| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2024-04-10 | EMIS | 2528955 | 376021 (14.9%) | 375153 (14.8%) | 
| 2024-04-10 | TPP | 201791 | 33444 (16.6%) | 29081 (14.4%) | 
| 2024-04-10 | Vision | 335318 | 53983 (16.1%) | 53559 (16%) | 
LINK: [https://github.com/rw251/.../conditions/neck-problems/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/neck-problems/1)

### Neuropathic pain

Neuropathic pain is nerve pain that can happen if your nervous system malfunctions or gets damaged. You can feel pain from any of the various levels of your nervous system, including your peripheral nerves, your spinal cord and your brain. Damaged nerve fibers send the wrong signals to pain centers in your body, resulting in neuropathic pain.

Readcodes from: https://clinicalcodes.rss.mhs.man.ac.uk/medcodes/article/176/codelist/res176-neuropathic-pain/
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set.

The discrepancy between the patients counted when using the IDs vs using the clinical codes is due to these being new codes which haven't all filtered through to the main Graphnet dictionary. The prevalence range `9.34% - 10.3%` is perhaps too wide to suggest that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2024-04-10 | EMIS | 2528955 | 236155 (9.34%) | 236110 (9.34%) | 
| 2024-04-10 | TPP | 201791 | 20713 (10.3%) | 20721 (10.3%) | 
| 2024-04-10 | Vision | 335318 | 32262 (9.62%) | 32256 (9.62%) | 


LINK: [https://github.com/rw251/.../conditions/neuropathic-pain/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/neuropathic-pain/1)

### Chest pain

Any code indicating chest pain.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `14.2% - 15.4%`  indicates that this code set is well defined.

update:

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2024-04-10 | EMIS | 2528955 | 376475 (14.9%) | 376475 (14.9%) | 
| 2024-04-10 | TPP | 201791 | 28648 (14.2%) | 28648 (14.2%) | 
| 2024-04-10 | Vision | 335318 | 51659 (15.4%) | 51656 (15.4%) | 
LINK: [https://github.com/rw251/.../conditions/chest-pain/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/chest-pain/1)

###  Post herpetic neuralgia codes

Developed from https://getset.ga with inclusion terms and exclusion terms as below:

  "includeTerms": [
    "post-herpetic neuralgia",
    "post-zoster",
    "post-herpetic",
    "post zoster",
    "post herpetic"
  ],
  "excludeTerms": [],

  ## Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.18% - 0.24%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2023-10-12 | EMIS            | 2470460    |    5882 (0.24%)  |    5886 (0.24%)   |
| 2023-10-12 | TPP             | 200512     |     374 (0.18%)  |     374 (0.18%)   |
| 2023-10-12 | Vision          | 332318     |     695 (0.21%)  |     692 (0.21%)   |
LINK: [https://github.com/rw251/.../conditions/post-herpetic-neuralgia/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/post-herpetic-neuralgia/1)

### Ankylosing Spondylitis

A code indicating a diagnosis of ankylosing Spondylitis.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.12% - 0.14%` suggests this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2024-01-19 | EMIS            | 2519438    |    3089 (0.123%) |     3090 (0.123%) |
| 2024-01-19 | TPP             | 201469     |     269 (0.134%) |      267 (0.133%) |
| 2024-01-19 | Vision          | 334528     |      470 (0.14%) |       470 (0.14%) |
#### Audit log

- Find_missing_codes last run 2024-01-19

LINK: [https://github.com/rw251/.../conditions/ankylosing-spondylitis/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/ankylosing-spondylitis/1)

### Psoriatic arthritis

Psoriatic arthritis is a type of arthritis linked with psoriasis, a chronic skin and nail disease.

Any code indicating a diagnosis of psoriatic arthritis. Read codes from: https://clinicalcodes.rss.mhs.man.ac.uk/medcodes/article/34/codelist/res34-psoriatic_arthritis/
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.23% - 0.25%` suggests that this code set is well defined.


| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2024-04-17 | EMIS | 2529782 | 5697 (0.225%) | 5697 (0.225%) | 
| 2024-04-17 | TPP | 201840 | 470 (0.233%) | 470 (0.233%) | 
| 2024-04-17 | Vision | 335411 | 841 (0.251%) | 841 (0.251%) | 
LINK: [https://github.com/rw251/.../conditions/psoriatic-arthritis/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/psoriatic-arthritis/1)

### Fibromyalgia

This list contains any code indicating fibromyalgia or generalised pain. Read codes from: https://clinicalcodes.rss.mhs.man.ac.uk/medcodes/article/176/codelist/res176-fibromyalgia-and-generalized-pain-short/
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `2.19% - 2.76%` suggests that this code set is well defined.

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2024-04-11 | EMIS | 2528955 | 69969 (2.77%) | 69768 (2.76%) | 
| 2024-04-11 | TPP | 201791 | 4422 (2.19%) | 2850 (1.41%) | 
| 2024-04-11 | Vision | 335318 | 8841 (2.64%) | 8687 (2.59%) | 
LINK: [https://github.com/rw251/.../conditions/fibromyalgia/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/fibromyalgia/1)

### Temporomandibular Pain

Any code indicating temporomandibular pain.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.22% - 0.40%` suggests that this code set is well defined.


| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2024-04-16 | EMIS | 2529782 | 5931 (0.234%) | 5931 (0.234%) | 
| 2024-04-16 | TPP | 201840 | 814 (0.403%) | 814 (0.403%) | 
| 2024-04-16 | Vision | 335411 | 753 (0.225%) | 753 (0.225%) | 
LINK: [https://github.com/rw251/.../conditions/temporomandibular-pain/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/temporomandibular-pain/1)

### Phantom limb pain

Any code indicating a diagnosis of phantom limb pain.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.00% - 0.01%` suggests that this code set is rarely used or very rare.

update:

| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2024-07-11 | EMIS | 2533608 | 282 (0.0111%) | 223 (0.0088%) | 
| 2024-07-11 | TPP | 201974 | 24 (0.0119%) | 24 (0.0119%) | 
| 2024-07-11 | Vision | 335755 | 22 (0.00655%) | 12 (0.00357%) | 
LINK: [https://github.com/rw251/.../conditions/phantom-limb-pain/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/phantom-limb-pain/1)

### Chronic pancreatitis

Any code indicating a diagnosis of chronic pancreatitis. This code set also includes 'history of' chronic pancreatitis. Code set developed using the SNOMED online term browser.
#### Prevalence log

By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range `0.08% - 0.10%` suggests that this code set is well defined but rarely used.


| Date       | Practice system | Population | Patients from ID | Patient from code |
| ---------- | --------------- | ---------- | ---------------: | ----------------: |
| 2024-04-17 | EMIS | 2529782 | 2346 (0.0927%) | 2346 (0.0927%) | 
| 2024-04-17 | TPP | 201840 | 167 (0.0827%) | 167 (0.0827%) | 
| 2024-04-17 | Vision | 335411 | 298 (0.0888%) | 298 (0.0888%) | 
LINK: [https://github.com/rw251/.../conditions/chronic-pancreatitis/1](https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/chronic-pancreatitis/1)
# Clinical code sets

All code sets required for this analysis are available here: [https://github.com/rw251/.../SDE Lighthouse 06 - Chen/clinical-code-sets.csv](https://github.com/rw251/gm-idcr/tree/master/projects/SDE%20Lighthouse%2006%20-%20Chen/clinical-code-sets.csv). Individual lists for each concept can also be found by using the links above.