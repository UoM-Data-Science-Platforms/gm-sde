<style>@page {
  margin: 1.5cm;
  size: A4 portrait;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif,
    Apple Color Emoji, Segoe UI Emoji;
  font-size: 16px;
  line-height: 1.5;
  word-wrap: break-word;
  margin-bottom: 0;
}

body > :last-child {
  margin-bottom: -1px;
  overflow: hidden;
}

h1 {
  font-size: 2em;
}

h2 {
  font-size: 1.5em;
}

h3 {
  font-size: 1.25em;
}

h4 {
  font-size: 1em;
}

h1,
h2,
h3,
h4 {
  margin-top: 24px;
  margin-bottom: 16px;
  font-weight: 600;
  line-height: 1.25;
}

b,
strong {
  font-weight: 600;
}

p {
  text-align: justify;
}

table {
  break-inside: avoid;
  table-layout: auto;
  border-collapse: collapse;
  text-indent: 0;
  border-color: inherit;
  width: 100%;
}

th {
  background: #f3f4f4;
}

th,
td {
  padding: 5px;
  border: 1px solid black;
}

code {
  padding: 0.2em 0.4em;
  margin: 0;
  font-family: ui-monospace, SFMono-Regular, SF Mono, Consolas, Liberation Mono, Menlo, monospace;
  font-size: 85%;
  background-color: #f3f4f4;
  border-radius: 6px;
  white-space: nowrap;
}

pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f6f8fa;
  border-radius: 6px;
}

pre > code {
  word-wrap: normal;
  white-space: pre-wrap;
  background-color: #f6f8fa;
}
</style><p><em>This file is autogenerated. Please do not edit.</em></p>
<h1>ADAPT - improving the long-term management of lymphoma survivors</h1>
<h2>Summary</h2>
<p>ADAPT is a care pathway for Christie patients which aims to better manage the late treatment toxicities and long-term health risks associated with chemotherapy/radiotherapy in patients cured of lymphoma in a primary care setting. ADAPT aims to reduce the number of patients receiving inappropriate hospital based follow up whilst empowering patients and informing GPs to pro-actively co-manage the risks. This may lead to better outcomes and quality of life for patients, in addition to cost savings for the NHS. We plan to evaluate the cost-consequences of the ADAPT pathway to inform potential roll out across GM.</p>
<h2>Table of contents</h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#methodology">Methodology</a></li>
<li><a href="#reusable-queries">Reusable queries</a></li>
<li><a href="#clinical-code-sets">Clinical code sets</a></li>
</ul>
<h2>Introduction</h2>
<p>The aim of this document is to provide full transparency for all parts of the data extraction process.
This includes:</p>
<ul>
<li>The methodology around how the data extraction process is managed and quality is maintained.</li>
<li>A full list of all queries used in the extraction, and their associated objectives and assumptions.</li>
<li>A full list of all clinical codes used for the extraction.</li>
</ul>
<h2>Methodology</h2>
<p>After each proposal is approved, a Research Data Engineer (RDE) works closely with the research team to establish precisely what data they require and in what format.
The RDE has access to the entire de-identified database and so builds up an expertise as to which projects are feasible and how best to extract the relevant data.
The RDE has access to a library of resusable SQL queries for common tasks, and sets of clinical codes for different phenotypes, built up from previous studies.
Prior to data extraction, the code is checked and signed off by another RDE.</p>
<h2>Reusable queries</h2>
<p>This project required the following reusable queries:</p>
<ul>
<li>Cohort matching on year of birth / sex</li>
<li>Create table of patients who were alive at the study start date</li>
</ul>
<p>Further details for each query can be found below.</p>
<h3>Cohort matching on year of birth / sex</h3>
<p>To take a primary cohort and find a 1:n matched cohort based on year of birth and sex.</p>
<p><em>Input</em></p>
<pre><code>Takes two parameters
  - yob-flex: integer - number of years each way that still allow a year of birth match
  - num-matches: integer - number of matches for each patient in the cohort
 Requires two temp tables to exist as follows:
 MainCohort (FK_Patient_Link_ID, Sex, YearOfBirth)
 	- FK_Patient_Link_ID - unique patient id
	- Sex - M/F
	- YearOfBirth - Integer
 PotentialMatches (FK_Patient_Link_ID, Sex, YearOfBirth)
 	- FK_Patient_Link_ID - unique patient id
	- Sex - M/F
	- YearOfBirth - Integer
</code></pre>
<p><em>Output</em></p>
<pre><code>A temp table as follows:
 #CohortStore (FK_Patient_Link_ID, YearOfBirth, Sex, MatchingPatientId, MatchingYearOfBirth)
  - FK_Patient_Link_ID - unique patient id for primary cohort patient
  - YearOfBirth - of the primary cohort patient
  - Sex - of the primary cohort patient
  - MatchingPatientId - id of the matched patient
  - MatchingYearOfBirth - year of birth of the matched patient
</code></pre>
<p><em>File</em>: <code>query-cohort-matching-yob-sex.sql</code></p>
<p><em>Link</em>: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-cohort-matching-yob-sex.sql">https://github.com/rw251/.../query-cohort-matching-yob-sex.sql</a></p>
<hr>
<h3>Create table of patients who were alive at the study start date</h3>
<p>undefined</p>
<p><em>Input</em></p>
<pre><code>undefined
</code></pre>
<p><em>Output</em></p>
<pre><code>undefined
</code></pre>
<p><em>File</em>: <code>query-get-possible-patients.sql</code></p>
<p><em>Link</em>: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/Reusable%20queries%20for%20data%20extraction/query-get-possible-patients.sql">https://github.com/rw251/.../query-get-possible-patients.sql</a></p>
<h2>Clinical code sets</h2>
<p>This project required the following clinical code sets:</p>
<ul>
<li>diffuse-large-b-cell-lymphoma v1</li>
<li>hodgkin-lymphoma v1</li>
</ul>
<p>Further details for each code set can be found below.</p>
<h3>Diffuse large b cell lymphoma</h3>
<p>Child codes taken from snomed hierarchy using (1172695008 - Diffuse large B cell malignant lymphoma (morphologic abnormality)) and (109969005Diffuse large B-cell malignant lymphoma (disorder)).</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>0.07% - 0.09%</code> suggests that this code set is rare but well defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2024-10-16</td>
<td>EMIS</td>
<td>2709725</td>
<td style="text-align:right">2461 (0.0908%)</td>
<td style="text-align:right">2461 (0.0908%)</td>
</tr>
<tr>
<td>2024-10-16</td>
<td>TPP</td>
<td>216275</td>
<td style="text-align:right">162 (0.0749%)</td>
<td style="text-align:right">162 (0.0749%)</td>
</tr>
<tr>
<td>2024-10-16</td>
<td>Vision</td>
<td>352021</td>
<td style="text-align:right">350 (0.0994%)</td>
<td style="text-align:right">350 (0.0994%)</td>
</tr>
<tr>
<td>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/diffuse-large-b-cell-lymphoma/1">https://github.com/rw251/.../conditions/diffuse-large-b-cell-lymphoma/1</a></td>
<td></td>
<td></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>
<h3>Hogkin lymphoma</h3>
<p>Codes taken from snomed hierarchy - all child codes of (118599009 - Hodgkin's disease)</p>
<h4>Prevalence log</h4>
<p>By examining the prevalence of codes (number of patients with the code in their record) broken down by clinical system, we can attempt to validate the clinical code sets and the reporting of the conditions. Here is a log for this code set. The prevalence range <code>0.01% - 0.09%</code> is perhaps a bit wide, but as the numbers are so low it is likely well-defined.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Practice system</th>
<th>Population</th>
<th style="text-align:right">Patients from ID</th>
<th style="text-align:right">Patient from code</th>
</tr>
</thead>
<tbody>
<tr>
<td>2024-10-11</td>
<td>EMIS</td>
<td>2712578</td>
<td style="text-align:right">2229 (0.0822%)</td>
<td style="text-align:right">2219 (0.0818%)</td>
</tr>
<tr>
<td>2024-10-11</td>
<td>TPP</td>
<td>216471</td>
<td style="text-align:right">161 (0.0744%)</td>
<td style="text-align:right">16 (0.00739%)</td>
</tr>
<tr>
<td>2024-10-11</td>
<td>Vision</td>
<td>352420</td>
<td style="text-align:right">333 (0.0945%)</td>
<td style="text-align:right">328 (0.0931%)</td>
</tr>
<tr>
<td>LINK: <a href="https://github.com/rw251/gm-idcr/tree/master/shared/clinical-code-sets/conditions/hodgkin-lymphoma/1">https://github.com/rw251/.../conditions/hodgkin-lymphoma/1</a></td>
<td></td>
<td></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>
<h1>Clinical code sets</h1>
<p>All code sets required for this analysis are available here: <a href="https://github.com/rw251/gm-idcr/tree/master/projects/SDE%20Lighthouse%2015%20-%20Radford%20-%20Adapt/clinical-code-sets.csv">https://github.com/rw251/.../SDE Lighthouse 15 - Radford - Adapt/clinical-code-sets.csv</a>. Individual lists for each concept can also be found by using the links above.</p>
